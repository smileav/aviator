{{ header }}{{ column_left }}
<div id="content">
	<div class="page-header">
		<div class="container-fluid">
			<div class="pull-right">
				<button type="submit" form="form-onepcheckout" data-toggle="tooltip" title="{{ button_save }}" class="btn btn-primary"><i class="fa fa-save"></i></button>
				<a href="{{ cancel }}" data-toggle="tooltip" title="{{ button_cancel }}" class="btn btn-default"><i class="fa fa-reply"></i></a>
			</div>
			<h1>{{ heading_title }}</h1>
			<ul class="breadcrumb">
				{% for breadcrumb in breadcrumbs %}
					<li><a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a></li>
				{% endfor %}
			</ul>
		</div>
	</div>
	<div class="container-fluid">
		{% if error_warning %}
			<div class="alert alert-danger alert-dismissible"><i class="fa fa-exclamation-circle"></i> {{ error_warning }}
				<button type="button" class="close" data-dismiss="alert">&times;</button>
			</div>
		{% endif %}
		<div class="panel panel-default">
			<div class="panel-heading">
				<h3 class="panel-title"><i class="fa fa-pencil"></i> {{ text_edit }}</h3>
			</div>
			<div class="panel-body">
				<form action="{{ action }}" method="post" enctype="multipart/form-data" id="form-onepcheckout" class="form-horizontal">
					<div class="form-group">
						<label class="col-sm-3 control-label">{{ entry_status }}</label>
						<div class="col-sm-9">
							<div class="btn-group" data-toggle="buttons">
								<label class="btn btn-default {% if config_show_onepcheckout %}active{% endif %}">
									<input type="radio" name="config_show_onepcheckout" value="1" autocomplete="off" {% if config_show_onepcheckout %}checked="checked"{% endif %}>
									{{ text_enabled }}
								</label>
								<label class="btn btn-default {% if not config_show_onepcheckout %}active{% endif %}">
									<input type="radio" name="config_show_onepcheckout" value="0" autocomplete="off" {% if not config_show_onepcheckout %}checked="checked"{% endif %}>
									{{ text_disabled }}
								</label>
							</div>
						</div>
					</div>
					<ul class="nav nav-tabs">
						<li class="active"><a href="#tab-general" data-toggle="tab">{{ text_tab_general }}</a></li>
						<li><a href="#tab-block-constructor" data-toggle="tab">{{ text_tab_block }}</a></li>
						<li><a href="#tab-details" data-toggle="tab">{{ text_tab_details }}</a></li>
						<li><a href="#tab-delivery" data-toggle="tab">{{ text_tab_delivery }}</a></li>
						<li><a href="#tab-payment" data-toggle="tab">{{ text_tab_payment }}</a></li>
						<li><a href="#tab-comment" data-toggle="tab">{{ text_tab_comment }}</a></li>
						<li><a href="#tab-javascript" data-toggle="tab">{{ text_tab_javascript }}</a></li>
						<li><a href="#tab-custom-field" data-toggle="tab">{{ text_tab_custom_field }}</a></li>
					</ul>
					<div class="tab-content">
						<div class="tab-pane active" id="tab-general">
							<div class="form-group">
								<label class="col-sm-3 control-label">{{ text_phone_mask }}</label>
								<div class="col-xs-9 col-sm-4">
									<input class="form-control" type="text" name="opc_mask" value="{{ opc_mask is not empty ? opc_mask : '' }}" />
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-3 control-label">{{ text_min_price_order }}</label>
								<div class="col-xs-9 col-sm-4">
									<input class="form-control" type="text" name="opc_min_price_order" value="{{ opc_min_price_order is not empty ? opc_min_price_order : '' }}" />
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-3 control-label">{{ text_agree_default }}</label>
								<div class="col-sm-9">
									<div class="btn-group" data-toggle="buttons">
										<label class="btn btn-default {% if opc_agree_default %}active{% endif %}">
											<input type="radio" name="opc_agree_default" value="1" autocomplete="off" {% if opc_agree_default %}checked="checked"{% endif %}>
											{{ text_enabled }}
										</label>
										<label class="btn btn-default {% if not opc_agree_default %}active{% endif %}">
											<input type="radio" name="opc_agree_default" value="0" autocomplete="off" {% if not opc_agree_default %}checked="checked"{% endif %}>
											{{ text_disabled }}
										</label>
									</div>
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-3 control-label">{{ text_show_weight }}</label>
								<div class="col-sm-9">
									<div class="btn-group" data-toggle="buttons">
										<label class="btn btn-default {% if opc_show_weight  %}active{% endif %}">
											<input type="radio" name="opc_show_weight" value="1" autocomplete="off" {% if opc_show_weight %}checked="checked"{% endif %}>
											{{ text_enabled }}
										</label>
										<label class="btn btn-default {% if not opc_show_weight %}active{% endif %}">
											<input type="radio" name="opc_show_weight" value="0" autocomplete="off" {% if not opc_show_weight %}checked="checked"{% endif %}>
											{{ text_disabled }}
										</label>
									</div>
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-3 control-label">{{ text_show_not_call_me }}</label>
								<div class="col-sm-9">
									<div class="btn-group" data-toggle="buttons">
										<label class="btn btn-default {% if opc_show_not_call_me  %}active{% endif %}">
											<input type="radio" name="opc_show_not_call_me" value="1" autocomplete="off" {% if opc_show_not_call_me %}checked="checked"{% endif %}>
											{{ text_enabled }}
										</label>
										<label class="btn btn-default {% if not opc_show_not_call_me  %}active{% endif %}">
											<input type="radio" name="opc_show_not_call_me" value="0" autocomplete="off" {% if not opc_show_not_call_me %}checked="checked"{% endif %}>
											{{ text_disabled }}
										</label>
									</div>
								</div>
							</div>
						</div>

						<div class="tab-pane" id="tab-block-constructor">
							<div id="opc_block_constructor">
								<div id="top_full" class="constructor-block col-sm-12" data-sb="top_full">
									<div class="info-block">{{ text_block_top_full }}</div>
									{% if (opc_sorts_block['top_full'] is defined) %}
										{% for opc_block,opc_value in opc_sorts_block['top_full'] %}
											<div class="block-cart col-sm-12">{{attribute(_context, 'text_block_' ~ opc_block) }}
												<input type="hidden" name="opc_sorts_block[{{ opc_block }}]" value="{{ opc_value }}" />
											</div>
										{% endfor %}
									{% endif %}
								</div>
								<div class="center-block">
									<div id="top_left" style="width:{{ opc_cl_width }}%" data-sb="top_left" data-sb-bottom="bottom_left" class="full-width col-sm-9">
										{% if (opc_sorts_block['top_left'] is defined) %}
											{% for opc_block,opc_value in opc_sorts_block['top_left'] %}
												<div class="block-cart col-sm-12">{{attribute(_context, 'text_block_' ~ opc_block) }}
													<input type="hidden" name="opc_sorts_block[{{ opc_block }}]" value="{{ opc_value }}" />
												</div>
											{% endfor %}
										{% endif %}
										<div class="group-lr-block">
											<div id="L" data-sb="center_left" class="left-column col-sm-6">
												{% if (opc_sorts_block['center_left'] is defined) %}
													{% for opc_block,opc_value in opc_sorts_block['center_left'] %}
														<div class="block-cart col-sm-12">{{attribute(_context, 'text_block_' ~ opc_block) }}
															<input type="hidden" name="opc_sorts_block[{{ opc_block }}]" value="{{ opc_value }}" />
														</div>
													{% endfor %}
												{% endif %}
											</div>
											<div id="R" data-sb="center_right" class="right-column col-sm-6">
												{% if (opc_sorts_block['center_right'] is defined) %}
													{% for opc_block,opc_value in opc_sorts_block['center_right'] %}
														<div class="block-cart col-sm-12">{{attribute(_context, 'text_block_' ~ opc_block) }}
															<input type="hidden" name="opc_sorts_block[{{ opc_block }}]" value="{{ opc_value }}" />
														</div>
													{% endfor %}
												{% endif %}
											</div>
										</div>
										{% if (opc_sorts_block['bottom_left'] is defined) %}
											{% for opc_block,opc_value in opc_sorts_block['bottom_left'] %}
												<div class="block-cart col-sm-12">{{attribute(_context, 'text_block_' ~ opc_block) }}
													<input type="hidden" name="opc_sorts_block[{{ opc_block }}]" value="{{ opc_value }}" />
												</div>
											{% endfor %}
										{% endif %}
										<span id="column-width" class="btn btn-sm btn-default"><i class="fa fa-arrows-h" aria-hidden="true"></i></span>
									</div>
									<div id="fix_right" data-sb="fix_right" style="width:{{ opc_cr_width }}%" class="col-sm-3 totals-column">
										<div class="opc-column-title">{{ text_block_totals_title }}</div>
											{% if (opc_sorts_block['fix_right'] is defined) %}
												{% for opc_block,opc_value in opc_sorts_block['fix_right'] %}
													<div class="block-cart col-sm-12">{{attribute(_context, 'text_block_' ~ opc_block) }}
														<input type="hidden" name="opc_sorts_block[{{ opc_block }}]" value="{{ opc_value }}" />
													</div>
												{% endfor %}
											{% endif %}
									</div>
								</div>
								<div id="bottom_full" class="constructor-block col-sm-12" data-sb="bottom_full">
									<div class="info-block">{{ text_block_bottom_full }}</div>
									{% if (opc_sorts_block['bottom_full'] is defined) %}
										{% for opc_block,opc_value in opc_sorts_block['bottom_full'] %}
											<div class="block-cart col-sm-12">{{attribute(_context, 'text_block_' ~ opc_block) }}
												<input type="hidden" name="opc_sorts_block[{{ opc_block }}]" value="{{ opc_value }}" />
											</div>
										{% endfor %}
									{% endif %}
								</div>
							</div>
							<div id="popover-content" style="display: none;">
								<div class="popover-left-column">
									<label class="control-label">{{ entry_left_column_val }}</label>
									<div class="input-group">
										<input name="opc_cl_width" type="text" value="{{ opc_cl_width }}" class="form-control" placeholder="{{ text_entry_value }}">
										<span class="input-group-addon">%</span>
									</div>
								</div>
								<div class="popover-right-column">
									<label class="control-label">{{ entry_right_column_val }}</label>
									<div class="input-group">
										<input name="opc_cr_width" type="text" value="{{ opc_cr_width }}" class="form-control" placeholder="{{ text_entry_value }}">
										<span class="input-group-addon">%</span>
									</div>
								</div>
							</div>
						</div>

						<div class="tab-pane" id="tab-details">
						<div class="col-sm-3">
						<ul class="nav nav-pills nav-stacked">
							{% for cs_code,cs_result in opc_customer_setting %}
								{% if (cs_code == 'default') %}
									<li class="active"><a href="#tab-customer-set-default" data-toggle="tab">{{ cs_result['title'] }}</a></li>
								{%	else %}
									<li id="opc-item-customer-set-{{ cs_code }}"><a href="#tab-customer-set-{{ cs_code }}" data-toggle="tab"><span class="text-ship-method">{{ cs_result['title'] }}</span><span class="remove-ship-set" onclick="$('#opc-item-customer-set-{{ cs_code }}').remove(); $('#tab-customer-set-{{ cs_code }}').remove(); $('a[href=#tab-customer-set-default]').trigger('click'); return false;"><i class="fa fa-trash-o"></i></span></a></li>
								{%	endif %}
							{% endfor %}
							<li id="add_customer_shipping_set">
								<div class="title-shipping-methods">{{ text_shipping_options }}</div>
									<div class="input-group mt-15">
										<select name="customer_shipping_method" id="input-customer-shipping-method" class="form-control"></select>
										<span class="input-group-btn">
											<button data-toggle="collapse" href="#customer_search_shipping_methods" class="btn btn-default" type="button"><i class="fa fa-search" aria-hidden="true"></i></button>
										</span>
									</div>
									<div id="customer_search_shipping_methods" class="collapse">
										<div class="col-sm-12">
											<div class="form-group">
												<label>{{ text_address_country }}</label>
												<div>
													<select name="search_shipping[country_id]" class="form-control">
														{% for country in countries %}
															{% if (country['country_id'] == country_id) %}
																<option value="{{ country['country_id'] }}" selected="selected">{{ country['name'] }}</option>
															{% else %}
																<option value="{{ country['country_id'] }}">{{ country['name'] }}</option>
															{% endif %}
														{% endfor %}
													</select>
												</div>
											</div>
											<div class="form-group">
												<label>{{ text_address_zones }}</label>
												<div>
													<select class="form-control" name="search_shipping[zone_id]">
														<option value="0">{{ text_none }}</option>
														{% for zone in zones %}
															<option value="{{ zone['zone_id'] }}">{{ zone['name'] }}</option>
														{% endfor %}
													</select>
												</div>
											</div>
											<div class="form-group">
												<label for="input-search-customer-shipping-products">{{ text_cart }}</label>
												<div>
													<input type="text" name="product_name" value="" placeholder="{{ entry_product }}" id="input-search-customer-shipping-products" class="form-control" />
													<div class="well well-sm" style="height: 70px; overflow: auto; margin-bottom: 0px;"></div>
												</div>
												<button type="button" class="btn btn-default mt-10 w100p" onclick="findShippingMethods('customer');"><i class="fa fa-search" aria-hidden="true"></i> {{ button_search }}</button>
											</div>
										</div>
									</div>
									<button type="button" id="btn-add-shipset-customer" class="hidden btn btn-success btn-opc-success mt-10 w100p" onclick="addCustomerShippingSet('customer-shipping-method');"><i class="fa fa-plus" aria-hidden="true"></i> {{ button_add }}</button>
							</li>
						</ul>
					</div>
					<div class="col-sm-9">

						<div class="tab-content customer-sets-content">
							{% for csm_code,csm_fileds in opc_customer_setting %}
								<div id="tab-customer-set-{{ csm_code }}" class="tab-pane{% if(csm_code == 'default') %} active{% endif %}">
									<div class="sm-set-title">{{ csm_fileds['title'] }}</div>
									<input type="hidden" name="opc_customer_setting[{{ csm_code }}][title]" value="{{ csm_fileds['title'] }}">
									{% for name_field,field in csm_fileds %}
										{% if field is iterable %}
											{% if name_field starts with "custom_field_" %}
												<div class="form-group field-custom-field-{{ field.id }}">
													<label class="col-sm-2 control-label cf_name">
														<div class="text-field-name">{{ field.name }}</div>
														<div class="text-filed-name-default">[custom_field_id_{{ field.id }}]</div>
													</label>

													<div class="col-sm-10">
														<div class="pull-left mr-15"><span title="{{ text_sorts_field }}" data-toggle="tooltip" class="btn btn-info handle"><i class="fa fa-hand-grab-o"></i></span></div>
														<div class="pull-left mr-15"><button type="button" data-custom-field-id="{{ field.id }}" data-loading-text="<i class='fa fa-spinner fa-spin'></i>" class="btn btn-default button-custom-field"><i class="fa fa-cog" aria-hidden="true"></i></button></div>
														<div class="pull-left">
															<div class="btn-group group-show-when" data-toggle="buttons">
																<label data-toggle="tooltip" title="{{ text_all_client }}" class="btn btn-default all-client active">
																	<input autocomplete="off" type="radio" name="opc_customer_setting[{{ csm_code }}][{{ name_field }}][show_when]" value="all_client" checked="checked">
																	<i class="fa fa-users" aria-hidden="true"></i>
																</label>
																<label data-toggle="tooltip" title="{{ text_only_quest }}" class="btn btn-default only-quest">
																	<input autocomplete="off" type="radio" name="opc_customer_setting[{{ csm_code }}][{{ name_field }}][show_when]" value="only_quest">
																	<i class="fa fa-user-times" aria-hidden="true"></i>
																</label>
																<label data-toggle="tooltip" title="{{ text_only_authorized }}" class="btn btn-default only-authorized">
																	<input autocomplete="off" type="radio" name="opc_customer_setting[{{ csm_code }}][{{ name_field }}][show_when]" value="only_authorized">
																	<i class="fa fa-user-plus" aria-hidden="true"></i>
																</label>
															</div>
															<input type="hidden" name="opc_customer_setting[{{ csm_code }}][{{ name_field }}][id]" value="{{ field.id }}">
														</div>
														<div class="pull-left col-sm-4 col-md-3"><button type="button" data-toggle="tooltip" title="" class="btn btn-danger" onclick="confirm('{{ text_confirm }}') ? $(this).closest('.form-group.field-custom-field-{{ field.id }}').remove() : false;" data-original-title="{{ button_remove }}"><i class="fa fa-trash-o"></i></button></div>
													</div>
												</div>
											{% else %}
											<div class="form-group field-{{ name_field }} {% if (field['status'] == 'required') %}required{% elseif (field['status'] == '0') %}field-off{% endif %}">
												<label class="col-sm-2 control-label cf_name" for="input-{{ csm_code }}-customer-{{ name_field }}">
													<div class="text-field-name">{{ field['setting']['name_field'][lang_id] is not empty ? field['setting']['name_field'][lang_id] : attribute(_context, 'text_customer_' ~ name_field)  }}</div>
													<div class="text-filed-name-default">[{{ name_field }}]</div>
												</label>
												<div class="col-sm-10">
													<div class="pull-left mr-15"><span title="{{ text_sorts_field }}" data-toggle="tooltip" class="btn btn-info handle"><i class="fa fa-hand-grab-o"></i></span></div>
													<div class="pull-left mr-15"><button type="button" data-toggle="collapse" href="#{{ csm_code }}_setting_{{ name_field }}" class="btn btn-default"><i class="fa fa-cog" aria-hidden="true"></i></button></div>
													<div class="pull-left">
														<div class="btn-group group-show-when" data-toggle="buttons">
															<label data-toggle="tooltip" title="{{ text_all_client }}" class="btn btn-default all-client{% if (not field['show_when'] or field['show_when'] == 'all_client') %} active{% endif %}">
																<input autocomplete="off" type="radio" name="opc_customer_setting[{{ csm_code }}][{{ name_field }}][show_when]" value="all_client" {% if (not field['show_when'] or field['show_when'] == 'all_client') %}checked="checked"{% endif %}>
																<i class="fa fa-users" aria-hidden="true"></i>
															</label>
															<label data-toggle="tooltip" title="{{ text_only_quest }}" class="btn btn-default only-quest{% if (field['show_when'] == 'only_quest') %} active{% endif %}">
																<input autocomplete="off" type="radio" name="opc_customer_setting[{{ csm_code }}][{{ name_field }}][show_when]" value="only_quest" {% if (field['show_when'] == 'only_quest') %}checked="checked"{% endif %}>
																<i class="fa fa-user-times" aria-hidden="true"></i>
															</label>
															<label data-toggle="tooltip" title="{{ text_only_authorized }}" class="btn btn-default only-authorized{% if (field['show_when'] == 'only_authorized') %} active{% endif %}">
																<input autocomplete="off" type="radio" name="opc_customer_setting[{{ csm_code }}][{{ name_field }}][show_when]" value="only_authorized" {% if (field['show_when'] == 'only_authorized') %}checked="checked"{% endif %}>
																<i class="fa fa-user-plus" aria-hidden="true"></i>
															</label>
														</div>
													</div>
													<div class="pull-left col-sm-4 col-md-3">
														<select autocomplete="off" name="opc_customer_setting[{{ csm_code }}][{{ name_field }}][status]" id="input-{{ csm_code }}-customer-{{ name_field }}" class="form-control field-status">
															{% if (field['status'] == 'required') %}
																<option value="0">{{ text_disabled }}</option>
																<option value="required" selected="selected">{{ text_enabled_required }}</option>
																<option value="no_required">{{ text_enabled_no_required }}</option>
															{% elseif (field['status'] == 'no_required') %}
																<option value="0">{{ text_disabled }}</option>
																<option value="required">{{ text_enabled_required }}</option>
																<option value="no_required" selected="selected">{{ text_enabled_no_required }}</option>
															{% else %}
																<option value="0" selected="selected">{{ text_disabled }}</option>
																<option value="required">{{ text_enabled_required }}</option>
																<option value="no_required">{{text_enabled_no_required }}</option>
															{% endif %}
														</select>
													</div>
													<div id="{{ csm_code }}_setting_{{ name_field }}" class="col-xs-12 col-sm-9 col-md-9 panel-collapse collapse field_setting">
														<div class="form-group">
															<label class="col-sm-3 control-label">{{ text_field_name }}</label>
															<div class="col-sm-9">
																{% for language in languages %}
																	<div class="input-group">
																		<span class="input-group-addon"><img src="language/{{ language['code'] }}/{{ language['code'] }}.png" title="{{ language['name'] }}" /></span>
																		<input class="form-control{% if (language['language_id'] == lang_id) %} name-field{% endif %}" type="text" name="opc_customer_setting[{{ csm_code }}][{{ name_field }}][setting][name_field][{{ language['language_id'] }}]" value="{{ field['setting']['name_field'][language['language_id']] is not empty ? field['setting']['name_field'][language['language_id']] : '' }}" />
																	</div>
																{% endfor %}
															</div>
														</div>
														<div class="form-group">
															<label class="col-sm-3 control-label"><span data-toggle="tooltip" title="placeholder">{{ text_placeholder }}</span></label>
															<div class="col-sm-9">
																{% for language in languages %}
																	<div class="input-group">
																		<span class="input-group-addon"><img src="language/{{ language['code'] }}/{{ language['code'] }}.png" title="{{ language['name'] }}" /></span>
																		<input class="form-control" type="text" name="opc_customer_setting[{{ csm_code }}][{{ name_field }}][setting][placeholder_field][{{ language['language_id'] }}]" value="{{ field['setting']['placeholder_field'][language['language_id']] is not empty ? field['setting']['placeholder_field'][language['language_id']] : '' }}" />
																	</div>
																{% endfor %}
															</div>
														</div>
														<div class="form-group">
															<label class="col-sm-3 control-label"><span data-toggle="tooltip" title="placeholder">{{ text_field_error }}</span></label>
															<div class="col-sm-9">
																{% for language in languages %}
																	<div class="input-group">
																		<span class="input-group-addon"><img src="language/{{ language['code'] }}/{{ language['code'] }}.png" title="{{ language['name'] }}" /></span>
																		<input class="form-control" type="text" name="opc_customer_setting[{{ csm_code }}][{{ name_field }}][setting][text_error_field][{{ language['language_id'] }}]" value="{{ field['setting']['text_error_field'][language['language_id']] is not empty ? field['setting']['text_error_field'][language['language_id']] : '' }}" />
																	</div>
																{% endfor %}
															</div>
														</div>
														<div class="form-group">
															<label class="col-sm-3 control-label"><span data-toggle="tooltip" title="{{ text_cinfo_type_action }}">{{ text_type_action }}</span></label>
															<div class="col-sm-9">
																<select name="opc_customer_setting[{{ csm_code }}][{{ name_field }}][type_action]" class="form-control type-action-status">
																	{% if (field['type_action'] is defined and field['type_action'] == 'write_to') %}
																		<option value="default">{{ text_default }}</option>
																		<option value="write_to" selected="selected">{{ text_write_to }}</option>
																	{% else %}
																		<option value="default" selected="selected">{{ text_default }}</option>
																		<option value="write_to">{{ text_write_to }}</option>
																	{% endif %}
																</select>
															</div>
														</div>
														<div class="action-field form-group hidden">
															<label class="col-sm-3 control-label"><span data-toggle="tooltip" title="placeholder">{{ text_action_field }}</span></label>
															<div class="col-sm-9">
																<select name="opc_customer_setting[{{ csm_code }}][{{ name_field }}][action_field]" class="form-control">
																	<option {% if (field['action_field'] == '' or field['action_field'] is not defined) %}selected="selected"{% endif %}value="">{{ text_none }}</option>
																	<option {% if (field['action_field'] == 'firstname') %}selected="selected"{% endif %} value="firstname">[firstname] - {{ text_customer_firstname }}</option>
																	<option {% if (field['action_field'] == 'lastname') %}selected="selected"{% endif %} value="lastname">[lastname] - {{ text_customer_lastname }}</option>
																	<option {% if (field['action_field'] == 'comment') %}selected="selected"{% endif %} value="comment">[comment] - {{ text_block_comment }}</option>
																	<option {% if (field['action_field'] == 'shipping_method') %}selected="selected"{% endif %} value="shipping_method">[shipping_method] - {{ text_block_shipping_method }}</option>
																	<option {% if (field['action_field'] == 'payment_method') %}selected="selected"{% endif %} value="payment_method">[payment_method] - {{ text_block_payment_method }}</option>
																</select>
															</div>
														</div>

													</div>
												</div>
											</div>
										{% endif %}
										{% endif %}
									{% endfor %}
									<div class="form-group custom_fields_add_element">
										<label class="col-sm-2 control-label">{{ text_custom_field }}</label>
										<div class="col-sm-6">
											<div class="dropdown dropup">
												<button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">
													<i class="fa fa-plus" aria-hidden="true"></i>
													{{ button_add_element }}
													<i class="fa fa-angle-up" aria-hidden="true"></i>
												</button>
												<ul class="dropdown-menu list_custom_fields" data-cf-location="opc_customer" data-csm-code="{{ csm_code }}">
													{% if customer_custom_fields is not empty %}
														{% for ccf_sel in customer_custom_fields %}
															<li><a href="#" data-cfparams="{{ csm_code }},{{ ccf_sel.custom_field_id }},{{ ccf_sel.name }}" data-add-custom-field="{{ ccf_sel.location_code }}">{{ ccf_sel.name }}</a></li>
														{% endfor %}
														<li class="divider"></li>
													{% endif %}
													<li class="add-cfield"><a href="javascript:;" data-loading-text="{{ text_loading }}" class="button-custom-field"><i class="fa fa-plus" aria-hidden="true"></i> {{ button_create_field }}</a></li>
												</ul>
											</div>
										</div>
									</div>
									<script>
										Sortable.create(document.getElementById('tab-customer-set-{{ csm_code }}'), {
											handle: '.handle',
											animation: 150,
											onMove: function(event) {
												return event.related.className.indexOf('custom_fields_add_element') === -1;
											}
										});
									</script>
								</div>
							{% endfor %}
						</div>
					</div>
				</div>

				<div class="tab-pane" id="tab-delivery">

					<div class="opc_shipping_sets">
						<div class="col-sm-3">
							<ul class="nav nav-pills nav-stacked">
								{% for sm_code,sm_result in opc_payment_address %}
									{% if (sm_code == 'default') %}
										<li class="active"><a href="#tab-sm-set-default" data-toggle="tab">{{ sm_result['title'] }}</a></li>
									{% else %}
										<li id="opc-item-sm-set-{{ sm_code }}"><a href="#tab-sm-set-{{ sm_code }}" data-toggle="tab"><span class="text-ship-method">{{ sm_result['title'] }}</span><span class="remove-ship-set" onclick="$('#opc-item-sm-set-{{ sm_code }}').remove(); $('#tab-sm-set-{{ sm_code }}').remove(); $('a[href=#tab-sm-set-default]').trigger('click'); return false;"><i class="fa fa-trash-o"></i></span></a></li>
									{% endif %}
								{% endfor %}
								<li id="add_shipping_set">
									<div class="title-shipping-methods">{{ text_shipping_options }}</div>

										<div class="input-group mt-15">
											<select name="select_shipping_method" id="input-select-shipping-method" class="form-control"></select>
											<span class="input-group-btn">
												<button data-toggle="collapse" href="#search_shipping_methods" class="btn btn-default" type="button"><i class="fa fa-search" aria-hidden="true"></i></button>
											</span>
										</div>
										<div id="search_shipping_methods" class="collapse">
											<div class="col-sm-12">
												<div class="form-group">
													<label>{{ text_address_country }}</label>
													<div>
														<select name="search_shipping[country_id]" class="form-control">
															{% for country in countries %}
																{% if (country['country_id'] == country_id) %}
																	<option value="{{ country['country_id'] }}" selected="selected"> {{ country['name'] }}</option>
																{% else %}
																	<option value="{{ country['country_id'] }}">{{ country['name'] }}</option>
																{% endif %}
															{% endfor %}
														</select>
													</div>
												</div>
												<div class="form-group">
													<label>{{ text_address_zones }}</label>
													<div>
														<select name="search_shipping[zone_id]" class="form-control">
															<option value="0">{{ text_none }}</option>
															{% for zone in zones %}
																<option value="{{ zone['zone_id'] }}">{{ zone['name'] }}</option>
															{% endfor %}
														</select>
													</div>
												</div>
												<div class="form-group">
													<label for="input-search-shipping-products">{{ text_cart }}</label>
													<div>
														<input type="text" name="product_name" value="" placeholder="{{ entry_product }}" id="input-product" class="form-control" />
														<div class="well well-sm" style="height: 70px; overflow: auto; margin-bottom: 0px;"></div>
													</div>
													<button type="button" class="btn btn-default mt-10 w100p" onclick="findShippingMethods('shipping');"><i class="fa fa-search" aria-hidden="true"></i> {{ button_search }}</button>
												</div>
											</div>
										</div>
									<button type="button" id="btn-add-shipset" class="hidden btn btn-success btn-opc-success mt-10 w100p" onclick="addShippingSet('select-shipping-method');"><i class="fa fa-plus" aria-hidden="true"></i> {{ button_add }}</button>
								</li>
							</ul>
						</div>
						<div class="col-sm-9">
							<div class="tab-content shipping-method-sets-content">
								{% for name_shipping_method,result in opc_payment_address %}
										<div id="tab-sm-set-{{ name_shipping_method }}" class="tab-pane{% if (name_shipping_method == 'default') %} active{% endif %}">
											<div class="sm-set-title">{{ result['title'] }}</div>
											<input type="hidden" name="opc_payment_address[{{ name_shipping_method }}][title]" value="{{ result['title'] }}">
											{% for name_field,field in result %}
												{% if field is iterable %}
												{% if name_field starts with "custom_field_" %}
													<div class="form-group field-custom-field-{{ field['id'] }}">
														<label class="col-sm-2 control-label cf_name">
															<div class="text-field-name">{{ field['name'] }}</div>
															<div class="text-filed-name-default">[custom_field_id_{{ field['id'] }}]</div>
														</label>

														<div class="col-sm-10">
															<div class="pull-left mr-15"><span title="{{ text_sorts_field }}" data-toggle="tooltip" class="btn btn-info handle"><i class="fa fa-hand-grab-o"></i></span></div>
															<div class="pull-left mr-15"><button type="button" data-custom-field-id="{{ field['id'] }}" data-loading-text="<i class='fa fa-spinner fa-spin'></i>" class="btn btn-default button-custom-field"><i class="fa fa-cog" aria-hidden="true"></i></button></div>
															<div class="pull-left">
																<div class="btn-group group-show-when" data-toggle="buttons">
																	<label data-toggle="tooltip" title="{{ text_all_client }}" class="btn btn-default all-client active">
																		<input autocomplete="off" type="radio" name="opc_payment_address[{{ name_shipping_method }}][{{ name_field }}][show_when]" value="all_client" checked="checked">
																		<i class="fa fa-users" aria-hidden="true"></i>
																	</label>
																	<label data-toggle="tooltip" title="{{ text_only_quest }}" class="btn btn-default only-quest">
																		<input autocomplete="off" type="radio" name="opc_payment_address[{{ name_shipping_method }}][{{ name_field }}][show_when]" value="only_quest">
																		<i class="fa fa-user-times" aria-hidden="true"></i>
																	</label>
																	<label data-toggle="tooltip" title="{{ text_only_authorized }}" class="btn btn-default only-authorized">
																		<input autocomplete="off" type="radio" name="opc_payment_address[{{ name_shipping_method }}][{{ name_field }}][show_when]" value="only_authorized">
																		<i class="fa fa-user-plus" aria-hidden="true"></i>
																	</label>
																</div>
																<input type="hidden" name="opc_payment_address[{{ name_shipping_method }}][{{ name_field }}][id]" value="{{ field['id'] }}">
															</div>
															<div class="pull-left col-sm-4 col-md-3"><button type="button" data-toggle="tooltip" title="" class="btn btn-danger" onclick="confirm('{{ text_confirm }}') ? $(this).closest('.form-group.field-custom-field-{{ field['id'] }}').remove() : false;" data-original-title="{{ button_remove }}"><i class="fa fa-trash-o"></i></button></div>
														</div>
													</div>

												{% else %}
												<div class="form-group field-{{ name_field }} {% if (field['status'] == 'required') %}required{% elseif (field['status'] == '0') %}field-off{% endif %}">
													<label class="col-sm-2 control-label cf_name" for="input-{{ name_shipping_method }}-shipping-address-{{ name_field }}">
														<div class="text-field-name">{{ field['setting']['name_field'][lang_id] is not empty ? field['setting']['name_field'][lang_id] : attribute(_context, 'text_address_' ~ name_field) }}</div>
														<div class="text-filed-name-default">[{{ name_field }}]</div>
													</label>
													<div class="col-sm-10">
														<div class="pull-left mr-15"><span title="{{ text_sorts_field }}" data-toggle="tooltip" class="btn btn-info handle"><i class="fa fa-hand-grab-o"></i></span></div>
														<div class="pull-left mr-15"><button type="button" data-toggle="collapse" href="#{{ name_shipping_method }}_setting_{{ name_field }}" class="btn btn-default"><i class="fa fa-cog" aria-hidden="true"></i></button></div>
														<div class="pull-left">
															<div class="btn-group group-show-when" data-toggle="buttons">
																<label data-toggle="tooltip" title="{{ text_all_client }}" class="btn btn-default all-client{% if (not field['show_when'] or field['show_when'] == 'all_client') %} active{% endif %}">
																	<input autocomplete="off" type="radio" name="opc_payment_address[{{ name_shipping_method }}][{{ name_field }}][show_when]" value="all_client" {% if (not field['show_when'] or field['show_when'] == 'all_client') %}checked="checked"{% endif %}>
																	<i class="fa fa-users" aria-hidden="true"></i>
																</label>
																<label data-toggle="tooltip" title="{{ text_only_quest }}" class="btn btn-default only-quest{% if (field['show_when'] == 'only_quest') %} active{% endif %}">
																	<input autocomplete="off" type="radio" name="opc_payment_address[{{ name_shipping_method }}][{{ name_field }}][show_when]" value="only_quest" {% if (field['show_when'] == 'only_quest') %}checked="checked"{% endif %}>
																	<i class="fa fa-user-times" aria-hidden="true"></i>
																</label>
																<label data-toggle="tooltip" title="{{ text_only_authorized }}" class="btn btn-default only-authorized{% if (field['show_when'] == 'only_authorized') %} active{% endif %}">
																	<input autocomplete="off" type="radio" name="opc_payment_address[{{ name_shipping_method }}][{{ name_field }}][show_when]" value="only_authorized" {% if (field['show_when'] == 'only_authorized') %}checked="checked"{% endif %}>
																	<i class="fa fa-user-plus" aria-hidden="true"></i>
																</label>
															</div>
														</div>
														<div class="pull-left col-sm-4 col-md-3">
															<select autocomplete="off" name="opc_payment_address[{{ name_shipping_method }}][{{ name_field }}][status]" id="input-{{ name_shipping_method }}-shipping-address-{{ name_field }}" class="form-control field-status">
																{% if (field['status'] == 'required') %}
																	<option value="0">{{ text_disabled }}</option>
																	<option value="required" selected="selected">{{ text_enabled_required }}</option>
																	<option value="no_required">{{ text_enabled_no_required }}</option>
																{% elseif (field['status'] == 'no_required') %}
																	<option value="0">{{ text_disabled }}</option>
																	<option value="required">{{ text_enabled_required }}</option>
																	<option value="no_required" selected="selected">{{ text_enabled_no_required }}</option>
																{% else %}
																	<option value="0" selected="selected">{{ text_disabled }}</option>
																	<option value="required">{{ text_enabled_required }}</option>
																	<option value="no_required">{{ text_enabled_no_required }}</option>
																{% endif %}
															</select>
														</div>
														<div id="{{ name_shipping_method }}_setting_{{ name_field }}" class="col-xs-12 col-sm-9 col-md-9 panel-collapse collapse field_setting">
															<div class="form-group">
																<label class="col-sm-3 control-label">{{ text_field_name }}</label>
																<div class="col-sm-9">
																	{% for language in languages %}
																		<div class="input-group">
																			<span class="input-group-addon"><img src="language/{{ language['code'] }}/{{ language['code'] }}.png" title="{{ language['name'] }}" /></span>
																			<input class="form-control{% if (language['language_id'] == lang_id) %} name-field{% endif %}" type="text" name="opc_payment_address[{{ name_shipping_method }}][{{ name_field }}][setting][name_field][{{ language['language_id'] }}]" value="{{ field['setting']['name_field'][language['language_id']] is not empty ? field['setting']['name_field'][language['language_id']] : '' }}" />
																		</div>
																	{% endfor %}
																</div>
															</div>
															<div class="form-group">
																<label class="col-sm-3 control-label"><span data-toggle="tooltip" title="placeholder">{{ text_placeholder }}</span></label>
																<div class="col-sm-9">
																	{% for language in languages %}
																		<div class="input-group">
																			<span class="input-group-addon"><img src="language/{{ language['code'] }}/{{ language['code'] }}.png" title="{{ language['name'] }}" /></span>
																			<input class="form-control" type="text" name="opc_payment_address[{{ name_shipping_method }}][{{ name_field }}][setting][placeholder_field][{{ language['language_id'] }}]" value="{{ field['setting']['placeholder_field'][language['language_id']] is not empty ? field['setting']['placeholder_field'][language['language_id']] : '' }}" />
																		</div>
																	{% endfor %}
																</div>
															</div>
															<div class="form-group">
																<label class="col-sm-3 control-label">{{ text_field_error }}</label>
																<div class="col-sm-9">
																	{% for language in languages %}
																		<div class="input-group">
																			<span class="input-group-addon"><img src="language/{{ language['code'] }}/{{ language['code'] }}.png" title="{{ language['name'] }}" /></span>
																			<input class="form-control" type="text" name="opc_payment_address[{{ name_shipping_method }}][{{ name_field }}][setting][text_error_field][{{ language['language_id'] }}]" value="{{ field['setting']['text_error_field'][language['language_id']] is not empty ? field['setting']['text_error_field'][language['language_id']] : '' }}" />
																		</div>
																	{% endfor %}
																</div>
															</div>
															<div class="form-group">
																<label class="col-sm-3 control-label"><span data-toggle="tooltip" title="{{ text_cinfo_type_action }}">{{ text_type_action }}</span></label>
																<div class="col-sm-9">
																	<select name="opc_payment_address[{{ name_shipping_method }}][{{ name_field }}][type_action]" class="form-control type-action-status">
																		{% if (field['type_action'] is defined and field['type_action'] == 'write_to') %}
																			<option value="default">{{ text_default }}</option>
																			<option value="write_to" selected="selected">{{ text_write_to }}</option>
																		{% else %}
																			<option value="default" selected="selected">{{ text_default }}</option>
																			<option value="write_to">{{ text_write_to }}</option>
																		{% endif %}
																	</select>
																</div>
															</div>
															<div class="action-field form-group hidden">
																<label class="col-sm-3 control-label"><span data-toggle="tooltip" title="placeholder">{{ text_action_field }}</span></label>
																<div class="col-sm-9">
																	<select name="opc_payment_address[{{ name_shipping_method }}][{{ name_field }}][action_field]" class="form-control">
																		<option {% if (field['action_field'] == '' or field['action_field'] is not defined) %}selected="selected"{% endif %}value="">{{ text_none }}</option>
																		<option {% if (field['action_field'] == 'firstname') %}selected="selected"{% endif %} value="firstname">[firstname] - {{ text_customer_firstname }}</option>
																		<option {% if (field['action_field'] == 'lastname') %}selected="selected"{% endif %} value="lastname">[lastname] - {{text_customer_lastname }}</option>
																		<option {% if (field['action_field'] == 'comment') %}selected="selected"{% endif %} value="comment">[comment] - {{ text_block_comment }}</option>
																		<option {% if (field['action_field'] == 'shipping_method') %}selected="selected"{% endif %} value="shipping_method">[shipping_method] - {{ text_block_shipping_method }}</option>
																		<option {% if (field['action_field'] == 'payment_method') %}selected="selected"{% endif %} value="payment_method">[payment_method] - {{ text_block_payment_method }}</option>
																	</select>
																</div>
															</div>
															{% if (name_field == 'country' or name_field == 'zone_id') %}
																<div class="form-group">
																	<label class="col-sm-3 control-label">{{ entry_type }}</label>
																	<div class="col-sm-9">
																		<div class="btn-group" data-toggle="buttons">
																		{% if (not field['setting']['type'] or field['setting']['type'] == 'select') %}
																		<label class="btn btn-default active">
																		<input autocomplete="off" type="radio" name="opc_payment_address[{{ name_shipping_method }}][{{ name_field }}][setting][type]" value="select"  checked="checked" /> Select
																		</label>
																		<label class="btn btn-default">
																		<input autocomplete="off" type="radio" name="opc_payment_address[{{ name_shipping_method }}][{{ name_field }}][setting][type]" value="select2" /> Select2
																		</label>
																		{% else %}
																		<label class="btn btn-default">
																		<input autocomplete="off" type="radio" name="opc_payment_address[{{ name_shipping_method }}][{{ name_field }}][setting][type]" value="select" /> Select
																		</label>
																		<label class="btn btn-default active">
																		<input autocomplete="off" type="radio" name="opc_payment_address[{{ name_shipping_method }}][{{ name_field }}][setting][type]" value="select2" checked="checked" /> Select2
																		</label>
																		{% endif %}
																		</div>
																	</div>
																</div>
															{% endif %}
															{% if name_field in setting_type_fields %}
															<div class="form-group">
																<label class="col-sm-3 control-label" for="input-{{ name_shipping_method }}-{{ name_field }}-type">{{ entry_type }}</label>
																<div class="col-sm-9">
																	<select onchange="checkTypeField('addFieldValue-{{ name_shipping_method }}-{{ name_field }}',this.value);" name="opc_payment_address[{{ name_shipping_method }}][{{ name_field }}][setting][type]" id="input-{{ name_shipping_method }}-{{ name_field }}-type" class="form-control">
																		{% if (field['setting']['type'] == 'input') %}
																			<option value="input" selected="selected">{{ text_input }}</option>
																		{% else %}
																			<option value="input">{{ text_input }}</option>
																		{% endif %}
																		{% if ((name_shipping_method == 'novaposhta_department' or name_shipping_method == 'novaposhta_poshtomat' or name_shipping_method == 'ukrposhta_standard_department') and (name_field == 'city' or name_field == 'address_1')) %}
																			{% if (field['setting']['type'] == 'select2') %}
																				<option value="select2" selected="selected">{{ text_select2 }}</option>
																			{% else %}
																				<option value="select2">{{ text_select2 }}</option>
																			{% endif %}
																		{% else %}
																			{% if (field['setting']['type'] == 'select') %}
																				<option value="select" selected="selected">{{ text_select }}</option>
																			{% else %}
																				<option value="select">{{ text_select }}</option>
																			{% endif %}
																			{% if (field['setting']['type'] == 'radio') %}
																				<option value="radio" selected="selected">{{ text_radio }}</option>
																			{% else %}
																				<option value="radio">{{ text_radio }}</option>
																			{% endif %}
																		{% endif %}
																	</select>
																</div>
															</div>
															<div class="box-cf-{{ name_shipping_method }}-{{ name_field }}">
																{% set cf_row = 0 %}
																{% if (field['setting']['custom_fields'] is not empty) %}
																	{% for key_value,custom_field in field['setting']['custom_fields'] %}
																		<div class="form-group cf-row d-flex">
																			<label class="col-sm-3 control-label">
																				{{ entry_custom_value }}
																				<div class="opc-group-btn-input mt-10">
																					<div title="{{ text_sorts_field }}" data-toggle="tooltip" title="{{ text_sorts_field }}" data-toggle="tooltip" class="btn btn-sm btn-info handle"><i class="fa fa-hand-grab-o"></i></div>
																					<div class="opc-input-radio">
																						{% if (field['setting']['cf_default_select'] is defined and field['setting']['cf_default_select'] == cf_row) %}
																							<input type="radio" data-toggle="tooltip" title="{{ text_default_select_cfv }}" name="opc_payment_address[{{ name_shipping_method }}][{{ name_field }}][setting][cf_default_select]" value="{{ cf_row }}" checked="checked" />
																						{% else %}
																							<input type="radio" data-toggle="tooltip" title="{{ text_default_select_cfv }}" name="opc_payment_address[{{ name_shipping_method }}][{{ name_field }}][setting][cf_default_select]" value="{{ cf_row }}" />
																						{% endif %}
																					</div>
																					<button type="button" onclick="$(this).closest('.cf-row').remove();" title="{{ button_remove }}" data-toggle="tooltip" class="btn btn-sm btn-danger"><i class="fa fa-trash-o"></i></button>
																				</div>
																			</label>
																			<div class="col-sm-9">
																				{% for language in languages %}
																					<div class="input-group">
																						<span class="input-group-addon"><img src="language/{{ language['code'] }}/{{ language['code'] }}.png" title="{{ language['name'] }}" /></span>
																							<input type="text" name="opc_payment_address[{{ name_shipping_method }}][{{ name_field }}][setting][custom_fields][{{ cf_row }}][{{ language['language_id'] }}][name]" value="{{ custom_field[language['language_id']]['name'] is not empty ? custom_field[language['language_id']]['name'] : '' }}" placeholder="{{ entry_custom_value }}" class="form-control" />
																					</div>
																				{% endfor %}
																			</div>
																		</div>
																		{% set cf_row = cf_row + 1 %}
																	{% endfor %}
																{% endif %}
																<input type="hidden" id="cf_{{ name_shipping_method }}-{{ name_field }}" value="{{ cf_row }}">
															</div>
															<script>
																Sortable.create(document.querySelector('.box-cf-{{ name_shipping_method }}-{{ name_field }}'), {
																	handle: '.handle',
																	animation: 150
																});
															</script>
															<div id="addFieldValue-{{ name_shipping_method }}-{{ name_field }}" class="form-group {% if (field['setting']['type'] is defined and (field['setting']['type'] == 'input' or field['setting']['type'] == 'select2') or field['setting']['type'] is not defined) %}hidden{% endif %}">
																<div class="text-center">
																	<button type="button" onclick="addFieldValue('{{ name_shipping_method }}','{{ name_field }}');" class="btn btn-primary">{{ button_add_value }}</button>
																</div>
															</div>
															{% endif %}
														</div>
													</div>
												</div>
											{% endif %}
											{% endif %}
											{% endfor %}
											<div class="form-group custom_fields_add_element">
												<label class="col-sm-2 control-label">{{ text_custom_field }}</label>
												<div class="col-sm-6">
													<div class="dropdown dropup">
														<button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">
															<i class="fa fa-plus" aria-hidden="true"></i>
															{{ button_add_element }}
															<i class="fa fa-angle-up" aria-hidden="true"></i>
														</button>
														<ul class="dropdown-menu list_custom_fields" data-cf-location="opc_address" data-csm-code="{{ name_shipping_method }}">
															{% if address_custom_fields is not empty%}
																{% for acf_sel in address_custom_fields %}
																	<li><a href="#" data-cfparams="{{ name_shipping_method }},{{ acf_sel.custom_field_id }},{{ acf_sel.name }}" data-add-custom-field="{{ acf_sel.location_code }}">{{ acf_sel.name }}</a></li>
																{% endfor %}
																<li class="divider"></li>
															{% endif %}
															<li class="add-cfield"><a href="javascript:;" data-loading-text="{{ text_loading }}" class="button-custom-field"><i class="fa fa-plus" aria-hidden="true"></i> {{ button_create_field }}</a></li>
														</ul>
													</div>
												</div>
											</div>
										<script>
											Sortable.create(document.getElementById('tab-sm-set-{{ name_shipping_method }}'), {
												handle: '.handle',
												animation: 150,
												onMove: function(event) {
													return event.related.className.indexOf('custom_fields_add_element') === -1;
												}
											});
										</script>
									</div>
								{% endfor %}
							</div>
						</div>
					</div>
				</div>

				<div class="tab-pane" id="tab-payment">
					<div class="col-sm-3">
						<div class="title-payment">{{ title_opc_payment }}</div>
						<ul class="nav nav-pills nav-stacked">

							{% for pkey_m, result_pmethod in opc_payment_option %}
								<li id="opc-item-set-{{ result_pmethod['code'] }}" {% if pkey_m == 0 %}class="active"{% endif %}>
									<a href="#tab-paymnet-set-{{ result_pmethod['code'] }}" data-toggle="tab">
										<span class="text-payment-method">{{ result_pmethod['name'] }}</span>
										<span class="remove-payment-set" onclick="$('#opc-item-set-{{ result_pmethod['code'] }}').remove(); $('#tab-paymnet-set-{{ result_pmethod['code'] }}').remove(); $('#tab-payment .nav-pills li:first-child a').trigger('click'); return false;">
											<i class="fa fa-trash-o"></i>
										</span>
									</a>
								</li>
							{% endfor %}

							<li id="add_payment_methods">
								<div class="title-payment-methods">{{ text_payment_methods }}</div>
								<div class="mt-15">
									{% if paymentMethods is not empty %}
										<select name="all_payment_methods" id="" class="form-control">
											{% for payment in paymentMethods %}
												<option value="{{ payment['code'] }}">{{ payment['name'] }}</option>
											{% endfor %}
										</select>
										<button type="button" class="btn btn-success btn-opc-success mt-10 w100p" onclick="addPaymentMethod();">
											<i class="fa fa-plus" aria-hidden="true"></i> {{ button_add }}
										</button>
									{% else %}
										{{ text_empty_payment_method }}
									{% endif %}
								</div>
							</li>

						</ul>
					</div>
					<div class="col-sm-9">
						<div class="tab-content sets-payment">
							{% if opc_payment_option is not empty %}
								{% for pkey_d, payment_data in opc_payment_option %}
									<div id="tab-paymnet-set-{{ payment_data.code }}" class="tab-pane {% if pkey_d == 0 %}active{% endif %}">
										<div class="title-paymnet-code"><span class="paymnet-code">{{ payment_data.code }}</span> - {{ payment_data.name }}</div>
										<div class="form-group">
											<label class="col-sm-3 control-label" for="input-payment-quest">{{ entry_status_payment_quest }}</label>
											<div class="col-sm-9">
												<div class="btn-group" data-toggle="buttons">
													<label class="btn btn-default {% if payment_data['option']['quest'] %}active{% endif %}">
														<input type="radio" name="opc_payment_option[{{ payment_data['code'] }}][quest]" value="1" autocomplete="off" {% if payment_data['option']['quest'] %}checked="checked"{% endif %}>
														{{ text_enabled }}
													</label>
													<label class="btn btn-default {% if not payment_data['option']['quest'] %}active{% endif %}">
														<input type="radio" name="opc_payment_option[{{ payment_data['code'] }}][quest]" value="0" autocomplete="off" {% if not payment_data['option']['quest'] %}checked="checked"{% endif %}>
														{{ text_disabled }}
													</label>
												</div>
												<p class="help-block">{{ help_payment_quest }}</p>
											</div>
										</div>
										<div class="form-group">
											<label class="col-sm-3 control-label" for="input-payment-quest">{{ entry_status_payment_authorized }}</label>
											<div class="col-sm-9">
												<div class="btn-group" data-toggle="buttons">
													<label class="btn btn-default {% if payment_data['option']['authorized'] %}active{% endif %}">
														<input type="radio" name="opc_payment_option[{{ payment_data['code'] }}][authorized]" value="1" autocomplete="off" {% if payment_data['option']['authorized'] %}checked="checked"{% endif %}>
														{{ text_enabled }}
													</label>
													<label class="btn btn-default {% if not payment_data['option']['authorized'] %}active{% endif %}">
														<input type="radio" name="opc_payment_option[{{ payment_data['code'] }}][authorized]" value="0" autocomplete="off" {% if not payment_data['option']['authorized'] %}checked="checked"{% endif %}>
														{{ text_disabled }}
													</label>
												</div>
												<p class="help-block">{{ help_payment_authorized }}</p>
											</div>
										</div>
										<div class="form-group">
											<label class="col-sm-3 control-label">{{ entry_payment_shipping_methods }}</label>
											<div class="col-sm-9">

												<div class="payment-list-items {% if payment_data['option']['shipping'] is empty %}empty{% else %}has-ship{% endif %}">
													<span class="no-shipping-methods{% if payment_data['option']['shipping'] is not empty %} hidden{% endif %}">{{ text_for_all_shipping }}</span>
													{% if payment_data['option']['shipping'] is not empty %}
														{% for p_ship_key, p_ship_val in payment_data['option']['shipping'] %}
															<div class="p-item" id="scode-{{ payment_data['code'] }}-{{ p_ship_key }}">
																<span class="s-code">{{ p_ship_val['code'] }}</span>
																<span class="s-text">{{ p_ship_val['text'] }}</span>
																<span class="s-del"><i class="fa fa-trash-o"></i></span>
																<input type="hidden" name="opc_payment_option[{{ payment_data['code'] }}][shipping][{{ p_ship_key }}][code]" value="{{ p_ship_val['code'] }}">
																<input type="hidden" name="opc_payment_option[{{ payment_data['code'] }}][shipping][{{ p_ship_key }}][text]" value="{{ p_ship_val['text'] }}">
															</div>
														{% endfor %}
													{% endif %}
												</div>

												<div class="input-group mt-15">
													<select name="payment_shipping_method" id="input-payment-shipping-method-{{ payment_data['code'] }}" class="form-control"></select>
													<span class="input-group-btn">
														<button data-toggle="collapse" href="#payment_search_shipping_methods_{{ payment_data['code'] }}" class="btn btn-default" type="button"><i class="fa fa-search" aria-hidden="true"></i></button>
													</span>
												</div>

												<div id="payment_search_shipping_methods_{{ payment_data.code }}" class="collapse">
													<div class="col-sm-12">
														<div class="form-group">
															<label>{{ text_address_country }}</label>
															<div>
																<select name="search_shipping[country_id]" class="form-control">
																	{% for country in countries %}
																		{% if country['country_id'] == country_id %}
																			<option value="{{ country['country_id'] }}" selected="selected">{{ country['name'] }}</option>
																		{% else %}
																			<option value="{{ country['country_id'] }}">{{ country['name'] }}</option>
																		{% endif %}
																	{% endfor %}

																</select>
															</div>
														</div>
														<div class="form-group">
															<label>{{ text_address_zones }}</label>
															<div>
																<select class="form-control" name="search_shipping[zone_id]">
																	<option value="0">{{ text_none }}</option>
																	{% for zone in zones %}
																		<option value="{{ zone['zone_id'] }}">{{ zone['name'] }}</option>
																	{% endfor %}
																</select>
															</div>
														</div>
														<div class="form-group">
															<label for="input-search-payment-shipping-products-{{ payment_data['code'] }}">{{ text_cart }}</label>
															<div>
																<input type="text" name="product_name" value="" placeholder="{{ entry_product }}" id="input-search-payment-shipping-products-{{ payment_data['code'] }}" class="form-control" />
																<div class="well well-sm" style="height: 70px; overflow: auto; margin-bottom: 0px;"></div>
															</div>
															<button type="button" class="btn btn-default mt-10 w100p" onclick="findShippingMethods('{{ payment_data['code'] }}');"><i class="fa fa-search" aria-hidden="true"></i> {{ button_search }}</button>
														</div>
													</div>
												</div>
												<button type="button" data-pcode="{{ payment_data.code }}" class="btn btn-success btn-opc-success mt-10 add-payment-shipping"><i class="fa fa-plus" aria-hidden="true"></i> {{ button_add }}</button>
											</div>
										</div>
									</div>
								{% endfor %}
							{% endif %}
						</div>
					</div>
				</div>

				<div class="tab-pane" id="tab-comment">
					<div class="form-group">
						<label class="col-sm-2 control-label" for="input-comment-status">{{ entry_status }}</label>
						<div class="col-sm-10">
							<select name="opc_comment_setting[status]" id="input-comment-status" class="form-control">
								{% if (opc_comment_setting['status']) %}
									<option value="1" selected="selected">{{ text_enabled }}</option>
									<option value="0">{{ text_disabled }}</option>
								{% else %}
									<option value="1">{{ text_enabled }}</option>
									<option value="0" selected="selected">{{ text_disabled }}</option>
								{% endif %}
							</select>
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-2 control-label">{{ text_field_name }}</label>
						<div class="col-sm-10">
							{% for language in languages %}
								<div class="input-group">
									<span class="input-group-addon"><img src="language/{{ language['code'] }}/{{ language['code'] }}.png" title="{{ language['name'] }}" /></span>
									<input class="form-control" type="text" name="opc_comment_setting[name_field][{{ language['language_id'] }}]" value="{{ opc_comment_setting['name_field'][language['language_id']] is defined ? opc_comment_setting['name_field'][language['language_id']] : '' }}" />
								</div>
							{% endfor %}
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-2 control-label"><span data-toggle="tooltip" title="placeholder">{{ text_placeholder }}</span></label>
						<div class="col-sm-10">
							{% for language in languages %}
								<div class="input-group">
									<span class="input-group-addon"><img src="language/{{ language['code'] }}/{{ language['code'] }}.png" title="{{ language['name'] }}" /></span>
									<input class="form-control" type="text" name="opc_comment_setting[placeholder_field][{{ language['language_id'] }}]" value="{{ opc_comment_setting['placeholder_field'][language['language_id']] is defined ? opc_comment_setting['placeholder_field'][language['language_id']] : '' }}" />
								</div>
							{% endfor %}
						</div>
					</div>
				</div>
				<div class="tab-pane" id="tab-javascript">
					<div class="col-sm-12">
						<div class="panel panel-default">
							<div class="panel-heading">{{ text_javascript_info }}</div>
							<div class="panel-body">
								<textarea class="form-control" placeholder="$('#cart').load('index.php?route=common/cart/info #cart > *');" name="opc_javascript" cols="30" rows="10">{{ opc_javascript }}</textarea>
							</div>
						</div>
					</div>
				</div>
				<div class="tab-pane" id="tab-custom-field">
					<div class="table-responsive">
						<table class="table table-bordered table-hover">
							<thead>
								<tr>
									<td class="text-left">{{ column_name }}</td>
									<td class="text-left">{{ column_location }}</td>
									<td class="text-left">{{ column_type }}</td>
									<td class="text-left">{{ column_status }}</td>
									<td class="text-left">{{ column_action }}</td>
								</tr>
							</thead>
							<tbody>
								{% if custom_fields is not empty %}
									{% for custom_field in custom_fields %}
									<tr>
										<td class="text-left">{{ custom_field.name }}</td>
										<td class="text-left">{{ custom_field.location }}</td>
										<td class="text-left">{{ custom_field.type }}</td>
										<td class="text-left">{{ custom_field.status }}</td>
										<td class="text-right">
											<a href="javascript:;" data-custom-field-id="{{ custom_field.custom_field_id }}" data-loading-text="<i class='fa fa-spinner fa-spin'></i>" data-toggle="tooltip" title="{{ button_edit }}" class="btn btn-primary button-custom-field"><i class="fa fa-pencil"></i></a>
											<a href="javascript:;" onclick="deleteCustomField('{{ custom_field.custom_field_id }}');" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-trash-o"></i></a>
										</td>
									</tr>
									{% endfor %}
								{% else %}
									<td class="text-center" colspan="5">{{ text_no_results }}</td>
								{% endif %}
							</tbody>
						</table>
						<button type="button" data-loading-text="{{ text_loading }}" class="btn btn-success btn-opc-success button-custom-field"><i class="fa fa-plus" aria-hidden="true"></i> {{ button_create_field }}</button>
					</div>
				</div>
			</div>
		  </form>
		</div>
	 </div>
  </div>
  </div>
<script>
$(document).on('click', '.button-custom-field', function(e){
	var button = $(this);
	var action = 'index.php?route=extension/module/onepcheckout/addCustomField&user_token={{ user_token }}'
	if(button.data('custom-field-id')){
		action += '&custom_field_id=' + button.data('custom-field-id')
	}
	$.ajax({
		type:'get',
		url: action,
		beforeSend: function() {
			button.button('loading');
		},
		complete: function() {
			button.button('reset');
		},
		success:function (data) {
			$('html body').append('<div id="modal-add-custom-field" class="modal fade" role="dialog">'+ data +'</div>');
			$('#modal-add-custom-field').modal('show');

			$(document).on('hide.bs.modal', '#modal-add-custom-field.modal.fade', function () {
				$('#modal-add-custom-field').remove();
			});
		}
	});
});

$(document).on('click', '[data-add-custom-field]', function(e) {
	e.preventDefault();

	var data_params = $(this).data('cfparams');
	var params = data_params.split(',');

	var data_custom_filed = $(this).attr('data-add-custom-field');

	if(data_custom_filed == 'opc_customer'){
		addCustomerCustomField(params);
	} else if(data_custom_filed == 'opc_address'){
		addAddressCustomField(params);
	}
});

function updateTable(data) {
  var tbody = $('#tab-custom-field tbody');
  tbody.empty();

  if (data.length > 0) {

    data.forEach(function(row) {
      var tr = $('<tr>');
      tr.append('<td class="text-left">' + row.name + '</td>');
      tr.append('<td class="text-left">' + row.location + '</td>');
      tr.append('<td class="text-left">' + row.type + '</td>');
      tr.append('<td class="text-left">' + row.status + '</td>');
      tr.append('<td class="text-right">' +
                '<a href="javascript:;" data-custom-field-id="'+ row.custom_field_id +'" data-toggle="tooltip" data-loading-text="<i class=\'fa fa-spinner fa-spin\'></i>" title="{{ button_edit }}" class="btn btn-primary button-custom-field"><i class="fa fa-pencil"></i></a> ' +
                '<a href="javascript:;" onclick="deleteCustomField('+ row.custom_field_id +');" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-trash-o"></i></a>' +
                '</td>');
      tbody.append(tr);
    });
  } else {
    var colspan = $('#custom-field-table thead tr th').length;
    var emptyRow = $('<tr>');
    emptyRow.append('<td class="text-center" colspan="' + colspan + '">' + '{{ text_no_results }}' + '</td>');
    tbody.append(emptyRow);
  }
}

function updateCustomFieldsDropDown(data) {
	$('.list_custom_fields').each(function() {
		var dropdown = $(this);
		var location = dropdown.attr('data-cf-location');
		var addFieldItem = dropdown.find('.add-cfield');

		dropdown.empty();
		if (data.length > 0) {
			data.forEach(function(field) {
				if(field.location_code == location){
					var listItem = $('<li>');
					var link = $('<a>');
					link.attr('href', '#');
					link.attr('data-cfparams', dropdown.attr('data-csm-code') + ',' + field.custom_field_id + ',' + field.name);
					link.attr('data-add-custom-field', field.location_code);
					link.text(field.name);
					listItem.append(link);
					dropdown.append(listItem);
				}
			});
			dropdown.append('<li class="divider"></li>');
		}

		dropdown.append(addFieldItem);
	});
}

function deleteCustomField(custom_field_id){
	$.ajax({
		type: 'post',
		url: 'index.php?route=extension/module/onepcheckout/deleteCustomField&user_token={{ user_token }}',
		data: 'custom_field_id=' + custom_field_id,
		dataType: 'json',
		success:function (json) {
			if (json['error']) {
				var alert_error = $('<div class="alert alert-danger"><i class="fa fa-exclamation-circle"></i> ' + json['error']['warning'] + '<button type="button" class="close" data-dismiss="alert">&times;</button></div>');
				$('#tab-custom-field').before(alert_error);

				setTimeout(function() {
					alert_error.animate({ opacity: 0 }, 500, function() {
						alert_error.remove();
					});
				}, 4000);
			}

			if (json['success']) {
				var alert_success = $('<div class="alert alert-success"><i class="fa fa-exclamation-circle"></i> ' + json['success'] + '<button type="button" class="close" data-dismiss="alert">&times;</button></div>');
				$('#tab-custom-field').before(alert_success);

				setTimeout(function() {
					alert_success.animate({ opacity: 0 }, 500, function() {
						alert_success.remove();
					});
				}, 4000);

				$('.field-custom-field-' + custom_field_id).remove();
				updateTable(json['custom_fields']);
				updateCustomFieldsDropDown(json['custom_fields']);
			}
		}
	});
}

function getCustomFieldData(){
	$.ajax({
		type: 'post',
		url: 'index.php?route=extension/module/onepcheckout/getCustomFieldData&user_token={{ user_token }}',
		dataType: 'json',
		success:function (json) {
			if (json['success']) {
				updateCustomFieldsDropDown(json['custom_fields']);
			}
		}
	});
}

function addCustomerCustomField(data_params){
	if($('#tab-customer-set-' + data_params[0] +' .field-custom-field-'+ data_params[1]).length){
		if (!confirm('{{ text_custom_field_confirm }}')) {
			return false;
		} else {
			$('#tab-customer-set-' + data_params[0] +' .field-custom-field-'+ data_params[1]).remove();
		}
	}

	html = '<div class="form-group field-custom-field-'+ data_params[1] +'">';
	html += '	<label class="col-sm-2 control-label cf_name">';
	html += '		<div class="text-field-name">'+ data_params[2] +'</div>';
	html += '		<div class="text-filed-name-default">[custom_field_id_'+ data_params[1] +']</div>';
	html += '	</label>';
	html += '	<div class="col-sm-10">';
	html += '		<div class="pull-left mr-15"><span title="{{ text_sorts_field }}" data-toggle="tooltip" class="btn btn-info handle"><i class="fa fa-hand-grab-o"></i></span></div>';
	html += '		<div class="pull-left mr-15"><button type="button"data-custom-field-id="'+ data_params[1] +'" data-loading-text="<i class=\'fa fa-spinner fa-spin\'></i>" class="btn btn-default button-custom-field"><i class="fa fa-cog" aria-hidden="true"></i></button></div>';
	html += '		<div class="pull-left">';
	html += '			<div class="btn-group group-show-when" data-toggle="buttons">';
	html += '				<label data-toggle="tooltip" title="{{ text_all_client }}" class="btn btn-default all-client active">';
	html += '					<input autocomplete="off" type="radio" name="opc_customer_setting['+  data_params[0] +'][custom_field_'+  data_params[1] +'][show_when]" value="all_client" checked="checked">';
	html += '					<i class="fa fa-users" aria-hidden="true"></i>';
	html += '				</label>';
	html += '				<label data-toggle="tooltip" title="{{ text_only_quest }}" class="btn btn-default only-quest">';
	html += '					<input autocomplete="off" type="radio" name="opc_customer_setting['+  data_params[0] +'][custom_field_'+  data_params[1] +'][show_when]" value="only_quest">';
	html += '					<i class="fa fa-user-times" aria-hidden="true"></i>';
	html += '				</label>';
	html += '				<label data-toggle="tooltip" title="{{ text_only_authorized }}" class="btn btn-default only-authorized">';
	html += '					<input autocomplete="off" type="radio" name="opc_customer_setting['+  data_params[0] +'][custom_field_'+  data_params[1] +'][show_when]" value="only_authorized">';
	html += '					<i class="fa fa-user-plus" aria-hidden="true"></i>';
	html += '				</label>';
	html += '			</div>';
	html += '			<input type="hidden" name="opc_customer_setting['+  data_params[0] +'][custom_field_'+  data_params[1] +'][id]" value="'+  data_params[1] +'">';
	html += '		</div>';
	html += '		<div class="pull-left col-sm-4 col-md-3"><button type="button" data-toggle="tooltip" title="" class="btn btn-danger" onclick="confirm(\'{{ text_confirm }}\') ? $(this).closest(\'.form-group.field-custom-field-' + data_params[1] + '\').remove() : false;" data-original-title="{{ button_remove }}"><i class="fa fa-trash-o"></i></button></div>';
	html += '	</div>'
	html += '</div>';


	$('#tab-customer-set-' + data_params[0] +' .custom_fields_add_element').before(html);
}

function addAddressCustomField(data_params){
	if($('#tab-sm-set-' + data_params[0] +' .field-custom-field-'+ data_params[1]).length){
		if (!confirm('{{ text_custom_field_confirm }}')) {
			return false;
		} else {
			$('#tab-sm-set-' + data_params[0] +' .field-custom-field-'+ data_params[1]).remove();
		}
	}

	html = '<div class="form-group field-custom-field-'+ data_params[1] +'">';
	html += '	<label class="col-sm-2 control-label cf_name">';
	html += '		<div class="text-field-name">'+ data_params[2] +'</div>';
	html += '		<div class="text-filed-name-default">[custom_field_id_'+ data_params[1] +']</div>';
	html += '	</label>';
	html += '	<div class="col-sm-10">';
	html += '		<div class="pull-left mr-15"><span title="{{ text_sorts_field }}" data-toggle="tooltip" class="btn btn-info handle"><i class="fa fa-hand-grab-o"></i></span></div>';
	html += '		<div class="pull-left mr-15"><button type="button"data-custom-field-id="'+ data_params[1] +'" data-loading-text="<i class=\'fa fa-spinner fa-spin\'></i>" class="btn btn-default button-custom-field"><i class="fa fa-cog" aria-hidden="true"></i></button></div>';
	html += '		<div class="pull-left">';
	html += '			<div class="btn-group group-show-when" data-toggle="buttons">';
	html += '				<label data-toggle="tooltip" title="{{ text_all_client }}" class="btn btn-default all-client active">';
	html += '					<input autocomplete="off" type="radio" name="opc_payment_address['+  data_params[0] +'][custom_field_'+  data_params[1] +'][show_when]" value="all_client" checked="checked">';
	html += '					<i class="fa fa-users" aria-hidden="true"></i>';
	html += '				</label>';
	html += '				<label data-toggle="tooltip" title="{{ text_only_quest }}" class="btn btn-default only-quest">';
	html += '					<input autocomplete="off" type="radio" name="opc_payment_address['+  data_params[0] +'][custom_field_'+  data_params[1] +'][show_when]" value="only_quest">';
	html += '					<i class="fa fa-user-times" aria-hidden="true"></i>';
	html += '				</label>';
	html += '				<label data-toggle="tooltip" title="{{ text_only_authorized }}" class="btn btn-default only-authorized">';
	html += '					<input autocomplete="off" type="radio" name="opc_payment_address['+  data_params[0] +'][custom_field_'+  data_params[1] +'][show_when]" value="only_authorized">';
	html += '					<i class="fa fa-user-plus" aria-hidden="true"></i>';
	html += '				</label>';
	html += '			</div>';
	html += '			<input type="hidden" name="opc_payment_address['+  data_params[0] +'][custom_field_'+  data_params[1] +'][id]" value="'+  data_params[1] +'">';
	html += '		</div>';
	html += '		<div class="pull-left col-sm-4 col-md-3"><button type="button" data-toggle="tooltip" title="" class="btn btn-danger" onclick="confirm(\'{{ text_confirm }}\') ? $(this).closest(\'.form-group.field-custom-field-' + data_params[1] + '\').remove() : false;" data-original-title="{{ button_remove }}"><i class="fa fa-trash-o"></i></button></div>';
	html += '	</div>'
	html += '</div>';


	$('#tab-sm-set-' + data_params[0] +' .custom_fields_add_element').before(html);
}

Sortable.create(top_left, {
	group: {
		name: "shared",
		pull: true,
		put: true
	},
	animation: 400,
	sort: true,
	swapThreshold: 0.5,
	handle: '.block-cart',
	onEnd: function (evt) {
		var itemEl = evt.item;
		$(itemEl).children().val($(itemEl).parent().attr("data-sb"));

		var $itemEl = $(itemEl);
		var $groupLrBlock = $itemEl.closest('#top_left').find('.group-lr-block');
		var $blockCartsPrev = $groupLrBlock.prevAll('.block-cart');
		var $blockCartsNext = $groupLrBlock.nextAll('.block-cart');

		if ($blockCartsPrev.is($itemEl)) {
			$(itemEl).children().val($(itemEl).parent().attr("data-sb"));
		} else if ($blockCartsNext.is($itemEl)) {
			$(itemEl).children().val($(itemEl).parent().attr("data-sb-bottom"));
		}

	},
});

Sortable.create(L, {
	group: "shared",
	pull: true,
	put: true,
	animation: 400,
	sort: true,
	swapThreshold: 1,
	draggable: '.block-cart',
	handle: '.block-cart',
	onEnd: function (evt) {
		var itemEl = evt.item;
		$(itemEl).children().val($(itemEl).parent().attr("data-sb"));

		var $itemEl = $(itemEl);
		var $groupLrBlock = $itemEl.closest('#top_left').find('.group-lr-block');
		var $blockCartsPrev = $groupLrBlock.prevAll('.block-cart');
		var $blockCartsNext = $groupLrBlock.nextAll('.block-cart');

		if ($blockCartsPrev.is($itemEl)) {
			$(itemEl).children().val($(itemEl).parent().attr("data-sb"));
		} else if ($blockCartsNext.is($itemEl)) {
			$(itemEl).children().val($(itemEl).parent().attr("data-sb-bottom"));
		}
	},
});

Sortable.create(R, {
	group: "shared",
	pull: true,
	put: true,
	animation: 400,
	sort: true,
	swapThreshold: 1,
	draggable: '.block-cart',
	handle: '.block-cart',
	onEnd: function (evt) {
		var itemEl = evt.item;
		$(itemEl).children().val($(itemEl).parent().attr("data-sb"));

		var $itemEl = $(itemEl);
		var $groupLrBlock = $itemEl.closest('#top_left').find('.group-lr-block');
		var $blockCartsPrev = $groupLrBlock.prevAll('.block-cart');
		var $blockCartsNext = $groupLrBlock.nextAll('.block-cart');

		if ($blockCartsPrev.is($itemEl)) {
			$(itemEl).children().val($(itemEl).parent().attr("data-sb"));
		} else if ($blockCartsNext.is($itemEl)) {
			$(itemEl).children().val($(itemEl).parent().attr("data-sb-bottom"));
		}
	},
});

Sortable.create(fix_right, {
	group: "shared",
	pull: true,
	put: true,
	animation: 400,
	sort: true,
	swapThreshold: 1,
	draggable: '.block-cart',
	handle: '.block-cart',
	onEnd: function (evt) {
		var itemEl = evt.item;
		$(itemEl).children().val($(itemEl).parent().attr("data-sb"));

		var $itemEl = $(itemEl);
		var $groupLrBlock = $itemEl.closest('#top_left').find('.group-lr-block');
		var $blockCartsPrev = $groupLrBlock.prevAll('.block-cart');
		var $blockCartsNext = $groupLrBlock.nextAll('.block-cart');

		if ($blockCartsPrev.is($itemEl)) {
			$(itemEl).children().val($(itemEl).parent().attr("data-sb"));
		} else if ($blockCartsNext.is($itemEl)) {
			$(itemEl).children().val($(itemEl).parent().attr("data-sb-bottom"));
		}
	},
});

Sortable.create(top_full, {
	group: {
		name: "shared",
		pull: true,
		put: true
	},
	animation: 400,
	sort: true,
	swapThreshold: 1,
	handle: '.block-cart',
	onEnd: function (evt) {
		var itemEl = evt.item;
		$(itemEl).children().val($(itemEl).parent().attr("data-sb"));

		var $itemEl = $(itemEl);
		var $groupLrBlock = $itemEl.closest('#top_left').find('.group-lr-block');
		var $blockCartsPrev = $groupLrBlock.prevAll('.block-cart');
		var $blockCartsNext = $groupLrBlock.nextAll('.block-cart');

		if ($blockCartsPrev.is($itemEl)) {
			$(itemEl).children().val($(itemEl).parent().attr("data-sb"));
		} else if ($blockCartsNext.is($itemEl)) {
			$(itemEl).children().val($(itemEl).parent().attr("data-sb-bottom"));
		}
	},
});

Sortable.create(bottom_full, {
	group: {
		name: "shared",
		pull: true,
		put: true
	},
	animation: 400,
	sort: true,
	swapThreshold: 1,
	handle: '.block-cart',
	onEnd: function (evt) {
		var itemEl = evt.item;
		$(itemEl).children().val($(itemEl).parent().attr("data-sb"));

		var $itemEl = $(itemEl);
		var $groupLrBlock = $itemEl.closest('#top_left').find('.group-lr-block');
		var $blockCartsPrev = $groupLrBlock.prevAll('.block-cart');
		var $blockCartsNext = $groupLrBlock.nextAll('.block-cart');

		if ($blockCartsPrev.is($itemEl)) {
			$(itemEl).children().val($(itemEl).parent().attr("data-sb"));
		} else if ($blockCartsNext.is($itemEl)) {
			$(itemEl).children().val($(itemEl).parent().attr("data-sb-bottom"));
		}
	},
});



$(document).on('click', '#column-width', function() {
	var $popover = $(this);

	$popover.popover({
		html: true,
		placement: 'top',
		trigger: 'click',
		template: '<div class="popover opc-popover-column-width"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content "></div></div>',
		title: '{{ text_column_width }} <button type="button" class="close" aria-label="Close">&times;</button>',
		content: function() {
			return $('#popover-content').html();
		},
		offset: '0, 10px'
	});

	if ($popover.next('.popover').length) {
		$popover.popover('hide');
	} else {
		$popover.popover('show');
	}

	$(document).on('click', '.popover .close', function() {
		$popover.popover('hide');
		$popover.popover('destroy');
	});

	$popover.on('hidden.bs.popover', function() {
		$popover.popover('hide');
		$popover.popover('destroy');
	});
	$(document).on('change', '.opc-popover-column-width [name="opc_cl_width"], .opc-popover-column-width [name="opc_cr_width"]', function() {
		var $changedField = $(this);
		var $otherField = $('.opc-popover-column-width [name="opc_cl_width"], .opc-popover-column-width [name="opc_cr_width"]').not($changedField);

		var changedValue = parseInt($changedField.val());
		var otherValue = 100 - changedValue;

		if (changedValue > 100) {
			changedValue = 100;
			$changedField.val(changedValue);
			otherValue = 0;
			$otherField.val(otherValue);
		} else if (otherValue > 100) {
			otherValue = 100;
			$otherField.val(otherValue);
			changedValue = 0;
			$changedField.val(changedValue);
		} else {
			$otherField.val(otherValue);
		}

		var leftWidth = parseInt($('[name="opc_cl_width"]').val());
		var rightWidth = parseInt($('[name="opc_cr_width"]').val());

		$('#top_left').css('width', leftWidth + '%');
		$('#fix_right').css('width', rightWidth + '%');

		$('#popover-content [name="opc_cl_width"]').attr('value',leftWidth)
		$('#popover-content [name="opc_cr_width"]').attr('value',rightWidth)

		var buttonPosition = $('#column-width').position();
		var buttonWidth = $('#column-width').outerWidth();
		var popoverWidth = $('.popover').outerWidth() / 2;
		var popoverLeft = buttonPosition.left + (buttonWidth / 2) - (popoverWidth + 10);
		$popover.data('bs.popover').tip().css({
			left: popoverLeft,
		});
	});
});

$(document).on("change", ".field-status", function() {
	if(this.value == 'required'){
		$(this).closest('.form-group').addClass('required').removeClass('field-off');
	} else if(this.value == '0') {
		$(this).closest('.form-group').removeClass('required').addClass('field-off');
	} else {
		$(this).closest('.form-group').removeClass('required').removeClass('field-off');
	}
});

$(document).on("change", ".name-field", function() {
	$(this).parents('.form-group').find('label.cf_name .text-field-name').html(this.value);
});

$(document).on("change", ".type-action-status", function() {
	console.log($(this).closest('.form-group').find('.action-field'));
	if(this.value == 'write_to'){
		$(this).closest('.panel-collapse').find('.action-field').removeClass('hidden');
	} else if(this.value == 'save_to') {
		$(this).closest('.panel-collapse').find('.action-field').removeClass('hidden');
	} else {
		$(this).closest('.panel-collapse').find('.action-field').addClass('hidden');
	}
});

function addCustomerShippingSet(select_shipping_method) {
	var sel_csm = document.getElementById("input-"+ select_shipping_method);
	var opc_csm_value = sel_csm.options[sel_csm.selectedIndex].value;
	var opc_csm_text = sel_csm.options[sel_csm.selectedIndex].text;
	var opc_csm_smethod = sel_csm.options[sel_csm.selectedIndex].dataset.smethod;


	if($('#opc-item-customer-set-' + opc_csm_value).length){
		if (!confirm('{{ text_shipping_confirm }}')) {
			return false;
		} else {
			$('#opc-item-customer-set-' + opc_csm_value).remove();
			$('#tab-customer-set-' + opc_csm_value).remove();
		}
	}

	$('#add_customer_shipping_set').before('<li id="opc-item-customer-set-'+ opc_csm_value +'"><a data-toggle="tab" href="#tab-customer-set-' + opc_csm_value + '" ><span class="text-ship-method">'+ opc_csm_text +'</span><span class="remove-ship-set" onclick="$(\'#opc-item-customer-set-'+ opc_csm_value +'\').remove(); $(\'#tab-sm-set-' + opc_csm_value + '\').remove(); $(\'a[href=#tab-customer-set-default]\').trigger(\'click\'); return false;"><i class="fa fa-trash-o"></i></span></a></li>');


	set_html  = '<div class="tab-pane" id="tab-customer-set-' + opc_csm_value + '">';
	set_html += '	<div class="sm-set-title">'+ opc_csm_text +'</div><input type="hidden" name="opc_customer_setting['+ opc_csm_value +'][title]" value="'+ opc_csm_text +'">';
						{% for name_field in customer_fields %}
	set_html += '		<div class="form-group field-{{ name_field }}">';
	set_html += '			<label class="col-sm-2 control-label cf_name" for="input-'+ opc_csm_value +'-customer-{{ name_field }}">';
	set_html += '				<div class="text-field-name">{{attribute(_context, 'text_customer_' ~ name_field) }}</div>';
	set_html += '				<div class="text-filed-name-default">[{{ name_field }}]</div>';
	set_html += '			</label>';
	set_html += '			<div class="col-sm-10">';
	set_html += '				<div class="pull-left mr-15"><span title="{{ text_sorts_field }}" data-toggle="tooltip" class="btn btn-info handle"><i class="fa fa-hand-grab-o"></i></span></div>';
	set_html += '				<div class="pull-left mr-15"><button type="button" data-toggle="collapse" href="#'+ opc_csm_value +'_setting_{{ name_field }}" class="btn btn-default"><i class="fa fa-cog" aria-hidden="true"></i></button></div>';
	set_html += '				<div class="pull-left">';
	set_html += '					<div class="btn-group group-show-when" data-toggle="buttons">';
	set_html += '						<label data-toggle="tooltip" title="{{ text_all_client }}" class="btn btn-default all-client active">';
	set_html += '							<input autocomplete="off" type="radio" name="opc_customer_setting['+ opc_csm_value +'][{{ name_field }}][show_when]" value="all_client" checked="checked">';
	set_html += '							<i class="fa fa-users" aria-hidden="true"></i>';
	set_html += '						</label>';
	set_html += '						<label data-toggle="tooltip" title="{{ text_only_quest }}" class="btn btn-default only-quest">';
	set_html += '							<input autocomplete="off" type="radio" name="opc_customer_setting['+ opc_csm_value +'][{{ name_field }}][show_when]" value="only_quest">';
	set_html += '							<i class="fa fa-user-times" aria-hidden="true"></i>';
	set_html += '						</label>';
	set_html += '						<label data-toggle="tooltip" title="{{ text_only_authorized }}" class="btn btn-default only-authorized">';
	set_html += '							<input autocomplete="off" type="radio" name="opc_customer_setting['+ opc_csm_value +'][{{ name_field }}][show_when]" value="only_authorized">';
	set_html += '							<i class="fa fa-user-plus" aria-hidden="true"></i>';
	set_html += '						</label>';
	set_html += '					</div>';
	set_html += '				</div>';
	set_html += '				<div class="pull-left col-sm-6">';
	set_html += '					<select autocomplete="off" name="opc_customer_setting['+ opc_csm_value +'][{{ name_field }}][status]" id="input-'+ opc_csm_value +'-customer-{{ name_field }}" class="form-control field-status">';
	set_html += '						<option value="0" selected="selected">{{ text_disabled }}</option>';
	set_html += '						<option value="required">{{ text_enabled_required }}</option>';
	set_html += '						<option value="no_required">{{ text_enabled_no_required }}</option>';
	set_html += '					</select>';
	set_html += '				</div>';

	set_html += '				<div id="'+ opc_csm_value +'_setting_{{ name_field }}" class="col-xs-12 col-sm-9 col-md-9 panel-collapse collapse field_setting">';
	set_html += '					<div class="form-group">';
	set_html += '						<label class="col-sm-3 control-label">{{ text_field_name }}</label>';
	set_html += '						<div class="col-sm-9">';
											{% for language in languages %}
	set_html += '							<div class="input-group">';
	set_html += '								<span class="input-group-addon"><img src="language/{{ language['code'] }}/{{ language['code'] }}.png" title="{{ language['name'] }}" /></span>';
	set_html += '								<input class="form-control{% if (language['language_id'] == lang_id) %} name-field{% endif %}" type="text" name="opc_customer_setting['+ opc_csm_value +'][{{ name_field }}][setting][name_field][{{ language['language_id'] }}]" value="" />';
	set_html += '							</div>';
											{% endfor %}
	set_html += '						</div>';
	set_html += '					</div>';
	set_html += '					<div class="form-group">';
	set_html += '						<label class="col-sm-3 control-label"><span data-toggle="tooltip" title="placeholder">{{ text_placeholder }}</span></label>';
	set_html += '						<div class="col-sm-9">';
											{% for language in languages %}
	set_html += '							<div class="input-group">';
	set_html += '								<span class="input-group-addon"><img src="language/{{ language['code'] }}/{{ language['code'] }}.png" title="{{ language['name'] }}" /></span>';
	set_html += '								<input class="form-control" type="text" name="opc_customer_setting['+ opc_csm_value +'][{{ name_field }}][setting][placeholder_field][{{ language['language_id'] }}]" value="" />';
	set_html += '							</div>';
											{% endfor %}
	set_html += '						</div>';
	set_html += '					</div>';
	set_html += '					<div class="form-group">';
	set_html += '						<label class="col-sm-3 control-label">{{ text_field_error }}</label>';
	set_html += '						<div class="col-sm-9">';
											{% for language in languages %}
	set_html += '							<div class="input-group">';
	set_html += '								<span class="input-group-addon"><img src="language/{{ language['code'] }}/{{ language['code'] }}.png" title="{{ language['name'] }}" /></span>';
	set_html += '								<input class="form-control" type="text" name="opc_customer_setting['+ opc_csm_value +'][{{ name_field }}][setting][text_error_field][{{ language['language_id'] }}]" value="" />';
	set_html += '							</div>';
											{% endfor %}
	set_html += '						</div>';
	set_html += '					</div>';

	set_html += '					<div class="form-group">';
	set_html += '						<label class="col-sm-3 control-label"><span data-toggle="tooltip" title="{{ text_cinfo_type_action }}">{{ text_type_action }}</span></label>';
	set_html += '						<div class="col-sm-9">';
	set_html += '							<select name="opc_customer_setting['+ opc_csm_value +'][{{ name_field }}][type_action]" class="form-control type-action-status">';
	set_html += '								<option value="default" selected="selected">{{ text_default }}</option>';
	set_html += '								<option value="write_to">{{ text_write_to }}</option>';
	set_html += '							</select>';
	set_html += '						</div>';
	set_html += '					</div>';
	set_html += '					<div class="action-field form-group hidden">';
	set_html += '						<label class="col-sm-3 control-label"><span data-toggle="tooltip" title="placeholder">{{ text_action_field }}</span></label>';
	set_html += '						<div class="col-sm-9">';
	set_html += '							<select name="opc_customer_setting['+ opc_csm_value +'][{{ name_field }}][action_field]" class="form-control">';
	set_html += '								<option selected="selected" value="">{{ text_none }}</option>';
	set_html += '								<option value="firstname">[firstname] - {{ text_customer_firstname }}</option>';
	set_html += '								<option value="lastname">[lastname] - {{ text_customer_lastname }}</option>';
	set_html += '								<option value="comment">[comment] - {{ text_block_comment }}</option>';
	set_html += '								<option value="shipping_method">[shipping_method] - {{ text_block_shipping_method }}</option>';
	set_html += '								<option value="payment_method">[payment_method] - {{ text_block_payment_method }}</option>';
	set_html += '							</select>';
	set_html += '						</div>';
	set_html += '					</div>';

	set_html += '				</div>';

	set_html += '			</div>';
	set_html += '		</div>';
						{% endfor %}

	set_html += '	<div class="form-group custom_fields_add_element">';
	set_html += '		<label class="col-sm-2 control-label">{{ text_custom_field }}</label>';
	set_html += '		<div class="col-sm-6">';
	set_html += '			<div class="dropdown dropup">';
	set_html += '				<button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown"><i class="fa fa-plus" aria-hidden="true"></i> {{ button_add_element }} <i class="fa fa-angle-up" aria-hidden="true"></i></button>';
	set_html += '				<ul class="dropdown-menu list_custom_fields" data-cf-location="opc_customer" data-csm-code="'+ opc_csm_value +'">';
										{% if customer_custom_fields is not empty %}
										{% for ccf_sel in customer_custom_fields %}
	set_html += '					<li><a href="#" data-cfparams="'+ opc_csm_value +',{{ ccf_sel.custom_field_id }},{{ ccf_sel.name }}" data-add-custom-field="{{ ccf_sel.location_code }}">{{ ccf_sel.name }}</a></li>';
										{% endfor %}
	set_html += '					<li class="divider"></li>';
										{% endif %}
	set_html += '					<li class="add-cfield"><a href="javascript:;" data-loading-text="{{ text_loading }}" class="button-custom-field"><i class="fa fa-plus" aria-hidden="true"></i> {{ button_create_field }}</a></li>';
	set_html += '				</ul>';
	set_html += '			</div>';
	set_html += '		</div>';
	set_html += '	</div>';

	set_html += '</div>';

	$('.customer-sets-content').append(set_html);
	$('#modal-shipping-methods .close-modal').trigger('click');

	Sortable.create(document.getElementById('tab-customer-set-' + opc_csm_value), {
		handle: '.handle',
		animation: 150
	});

	$('a[href=\'#tab-customer-set-' + opc_csm_value +'\']').trigger('click');
	getCustomFieldData();
}


$('select[name=\'search_shipping[country_id]\']').on('change', function() {
	var search_shipping_zone_id = $(this).closest('.collapse').find('select[name=\'search_shipping[zone_id]\']');
	$.ajax({
		url: 'index.php?route=extension/module/chameleon_myonepagecheckout/getCountry&user_token={{ user_token }}&country_id=' + this.value,
		dataType: 'json',
		success: function(json) {
			html = '<option value="">{{ text_none }}</option>';

			if (json['zone'] && json['zone'] != '') {
				for (i = 0; i < json['zone'].length; i++) {
					html += '<option value="' + json['zone'][i]['zone_id'] + '"';

					if (json['zone'][i]['zone_id'] == json['active_zone_id']) {
						html += ' selected="selected"';
					}

					html += '>' + json['zone'][i]['name'] + '</option>';
				}
			} else {
				html += '<option value="0" selected="selected">{{ text_none }}</option>';
			}
			search_shipping_zone_id.html(html);
		},
		error: function(xhr, ajaxOptions, thrownError) {
			alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
		}
	});
});

$('input[name=\'product_name\']').autocomplete({
	source: function(request, response) {
		$.ajax({
			url: 'index.php?route=catalog/product/autocomplete&user_token={{ user_token }}&filter_name=' +  encodeURIComponent(request),
			dataType: 'json',
			success: function(json) {
				response($.map(json, function(item) {
					return {
						label: item['name'],
						value: item['product_id']
					}
				}));
			}
		});
	},
	select: function(item) {
		var inputProduct = this;
		var inputProductId = inputProduct.id;

		$('#modal-add-product').remove();
		$('input[name=\'product_name\']').val('');

		html = '<div id="modal-add-product" class="modal fade">';
		html += '  <div class="modal-dialog opc-modal modal-dialog-centered">';
		html += '    <div class="modal-content">';
		html += '      <div class="modal-header">';
		html += '        <div class="modal-title">{{ entry_product }}</div>';
		html += '        <button type="button" class="close-modal" data-dismiss="modal" aria-hidden="true"><svg id="icon-close" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M1.293 1.293a1 1 0 0 1 1.414 0L8 6.586l5.293-5.293a1 1 0 1 1 1.414 1.414L9.414 8l5.293 5.293a1 1 0 0 1-1.414 1.414L8 9.414l-5.293 5.293a1 1 0 0 1-1.414-1.414L6.586 8 1.293 2.707a1 1 0 0 1 0-1.414z" clip-rule="evenodd"/></svg></button>';
		html += '      	</div>';
		html += '      <div class="modal-body"><div class="opc-row-product">';
		html += '      <div class="opc-product-name">' + item['label'] + '</div>';
		html += '      <div class="opc-product-quantity"><input type="text" name="quantity" value="1"  id="input-quantity" class="form-control" /></div>';
		html += '      <button type="button" class="btn btn-success btn-opc-success" onclick="OpcAddToCart('+ item['value'] +',this,\''+ inputProductId +'\');">{{ button_add }}</button></div>';
		html += '      </div>';
		html += '    </div>';
		html += '  </div>';
		html += '</div>';

		$('body').append(html);

		$('#modal-add-product').modal('show');

	}
});

function OpcAddToCart(product_id,elem,inputProductId) {
	var block = $('#' + inputProductId).closest('.form-group').find('.well');
	var produt_name = $(elem).closest('.opc-modal').find('.opc-product-name').html();
	var quantity = $(elem).closest('.opc-modal').find('input[name="quantity"]').val();

	$.ajax({
		url: '{{ catalog }}index.php?route=api/opc_api/add&api_token={{ api_token }}',
		type: 'post',
		data: 'product_id=' + product_id + '&quantity=' + (typeof(quantity) != 'undefined' ? quantity : 1),
		dataType: 'json',
		crossDomain: true,
		success: function(json) {
			block.find('div[data-product-id="' + product_id + '"]').remove();
			block.append('<div data-product-id="'+ product_id +'"><i class="fa fa-minus-circle" onclick="$(this).parent().remove()"></i> ' + produt_name + '<input type="hidden" name="product[]" value="' + product_id + '" /></div>');
			$('#modal-add-product').modal('hide');
		},
		error: function(xhr, ajaxOptions, thrownError) {
			alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
		}
	});
}

function findShippingMethods(data){

	$('#modal-shipping-methods').remove();

	$.ajax({
		url: '{{ catalog }}index.php?route=api/opc_api/shippingMethods&api_token={{ api_token }}',
		type: 'post',
		data: 'api_token={{ api_token }}',
		dataType: 'json',
		crossDomain: true,
		success: function(json) {


				html = '<div id="modal-shipping-methods" class="modal fade">';
				html += '	<div class="modal-dialog opc-modal modal-dialog-centered">';
				html += '		<div class="modal-content">';
				html += '		<div class="modal-header">';
				html += '				<div class="modal-title">{{ text_shipping_options }}</div>';
				html += '					<button type="button" class="close-modal" data-dismiss="modal" aria-hidden="true"><svg id="icon-close" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M1.293 1.293a1 1 0 0 1 1.414 0L8 6.586l5.293-5.293a1 1 0 1 1 1.414 1.414L9.414 8l5.293 5.293a1 1 0 0 1-1.414 1.414L8 9.414l-5.293 5.293a1 1 0 0 1-1.414-1.414L6.586 8 1.293 2.707a1 1 0 0 1 0-1.414z" clip-rule="evenodd"/></svg></button>';
				html += '				</div>';
				html += '      	<div class="modal-body">';
				if(json['smethods']){
					html += '			<select name="new_select_shipping_method" id="input-new-select-shipping-method" class="form-control">';
											for (i = 0; i < json['smethods'].length; i++) {
					html += '				<option data-smethod="'+ json['smethods'][i]['s_method'] +'" value="'+ json['smethods'][i]['code'] +'">'+ json['smethods'][i]['text'] +'</option>';
											}
					html += '			</select>';
					if(data.length && data == 'customer'){
						html += '      	<button type="button" class="btn btn-success mt-15 btn-opc-success" onclick="addCustomerShippingSet(\'new-select-shipping-method\');">{{ button_add }}</button>';
					} else if(data == 'shipping') {
						html += '      	<button type="button" class="btn btn-success mt-15 btn-opc-success" onclick="addShippingSet(\'new-select-shipping-method\');">{{ button_add }}></button>';
					} else {
						html += '<button type="button" data-pcode="' + data + '" class="btn btn-success btn-opc-success mt-10 add-payment-shipping"><i class="fa fa-plus" aria-hidden="true"></i> {{ button_add }}</button>'
					}
				} else {
					html += '<div class="empty-shipping-methods">{{ text_empty_shipping_methods }}</div>';
				}
				html += '      </div>';
				html += '    </div>';
				html += '  </div>';
				html += '</div>';

				$('body').append(html);

				$('#modal-shipping-methods').modal('show');

		},
		error: function(xhr, ajaxOptions, thrownError) {
			alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
		}
	});
}

function addShippingSet(select_shipping_method) {
	var sel_sm = document.getElementById("input-" + select_shipping_method);
	var opc_sm_value = sel_sm.options[sel_sm.selectedIndex].value;
	var opc_sm_text = sel_sm.options[sel_sm.selectedIndex].text;
	var opc_sm_smethod = sel_sm.options[sel_sm.selectedIndex].dataset.smethod;


	if($('#opc-item-sm-set-' + opc_sm_value).length){
		if (!confirm('{{ text_shipping_confirm }}')) {
			return false;
		} else {
			$('#opc-item-sm-set-' + opc_sm_value).remove();
			$('#tab-sm-set-' + opc_sm_value).remove();
		}
	}

	$('#add_shipping_set').before('<li id="opc-item-sm-set-'+ opc_sm_value +'"><a data-toggle="tab" href="#tab-sm-set-' + opc_sm_value + '" ><span class="text-ship-method">'+ opc_sm_text +'</span><span class="remove-ship-set" onclick="$(\'#opc-item-sm-set-'+ opc_sm_value +'\').remove(); $(\'#tab-sm-set-' + opc_sm_value + '\').remove(); $(\'a[href=#tab-sm-set-default]\').trigger(\'click\'); return false;"><i class="fa fa-trash-o"></i></span></a></li>');


	set_html  = '<div class="tab-pane" id="tab-sm-set-' + opc_sm_value + '">';
	set_html += '	<div class="sm-set-title">'+ opc_sm_text +'</div><input type="hidden" name="opc_payment_address['+ opc_sm_value +'][title]" value="'+ opc_sm_text +'">';

						{% for name_field in shipping_fields %}
	set_html += '		<div class="form-group field-{{ name_field }}">';
	set_html += '			<label class="col-sm-2 control-label cf_name" for="input-'+ opc_sm_value +'-shipping-address-{{ name_field }}">';
	set_html += '				<div class="text-field-name">{{attribute(_context, 'text_address_' ~ name_field) }}</div>';
	set_html += '				<div class="text-filed-name-default">[{{ name_field }}]</div>';
	set_html += '			</label>';
	set_html += '			<div class="col-sm-10">';
	set_html += '				<div class="pull-left mr-15"><span title="{{ text_sorts_field }}" data-toggle="tooltip" class="btn btn-info handle"><i class="fa fa-hand-grab-o"></i></span></div>';
	set_html += '				<div class="pull-left mr-15"><button type="button" data-toggle="collapse" href="#'+ opc_sm_value +'_setting_{{ name_field }}" class="btn btn-default"><i class="fa fa-cog" aria-hidden="true"></i></button></div>';
	set_html += '					<div class="pull-left">';
	set_html += '						<div class="btn-group group-show-when" data-toggle="buttons">';
	set_html += '							<label data-toggle="tooltip" title="{{ text_all_client }}" class="btn btn-default all-client active">';
	set_html += '								<input autocomplete="off" type="radio" name="opc_payment_address[' + opc_sm_value + '][{{ name_field }}][show_when]" value="all_client" checked="checked">';
	set_html += '								<i class="fa fa-users" aria-hidden="true"></i>';
	set_html += '							</label>';
	set_html += '							<label data-toggle="tooltip" title="{{ text_only_quest }}" class="btn btn-default only-quest">';
	set_html += '								<input autocomplete="off" type="radio" name="opc_payment_address[' + opc_sm_value + '][{{ name_field }}][show_when]" value="only_quest">';
	set_html += '								<i class="fa fa-user-times" aria-hidden="true"></i>';
	set_html += '							</label>';
	set_html += '							<label data-toggle="tooltip" title="{{ text_only_authorized }}" class="btn btn-default only-authorized">';
	set_html += '								<input autocomplete="off" type="radio" name="opc_payment_address[' + opc_sm_value + '][{{ name_field }}][show_when]" value="only_authorized">';
	set_html += '								<i class="fa fa-user-plus" aria-hidden="true"></i>';
	set_html += '							</label>';
	set_html += '						</div>';
	set_html += '					</div>';
	set_html += '				<div class="pull-left col-sm-4 col-md-3">';
	set_html += '					<select autocomplete="off" name="opc_payment_address['+ opc_sm_value +'][{{ name_field }}][status]" id="input-'+ opc_sm_value +'-shipping-address-{{ name_field }}" class="form-control field-status">';
	set_html += '							<option value="0" selected="selected">{{ text_disabled }}</option>';
	set_html += '							<option value="required">{{ text_enabled_required }}</option>';
	set_html += '							<option value="no_required">{{ text_enabled_no_required }}</option>';
	set_html += '					</select>';
	set_html += '				</div>';
	set_html += '				<div id="'+ opc_sm_value +'_setting_{{ name_field }}" class="col-xs-12 col-sm-9 col-md-9 panel-collapse collapse field_setting">';
	set_html += '					<div class="form-group">';
	set_html += '						<label class="col-sm-3 control-label">{{ text_field_name }}</label>';
	set_html += '						<div class="col-sm-9">';
											{% for language in languages %}
	set_html += '							<div class="input-group">';
	set_html += '									<span class="input-group-addon"><img src="language/{{ language['code'] }}/{{ language['code'] }}.png" title="{{ language['name'] }}" /></span>';
	set_html += '									<input class="form-control{% if (language['language_id'] == lang_id) %} name-field{% endif %}" type="text" name="opc_payment_address['+ opc_sm_value +'][{{ name_field }}][setting][name_field][{{ language['language_id'] }}]" value="" />';
	set_html += '								</div>';
											{% endfor %}
	set_html += '						</div>';
	set_html += '					</div>';
	set_html += '					<div class="form-group">';
	set_html += '						<label class="col-sm-3 control-label"><span data-toggle="tooltip" title="placeholder">{{ text_placeholder }}</span></label>';
	set_html += '						<div class="col-sm-9">';
												{% for language in languages %}
	set_html += '								<div class="input-group">';
	set_html += '									<span class="input-group-addon"><img src="language/{{ language['code'] }}/{{ language['code'] }}.png" title="{{ language['name'] }}" /></span>';
	set_html += '									<input class="form-control" type="text" name="opc_payment_address['+ opc_sm_value +'][{{ name_field }}][setting][placeholder_field][{{ language['language_id'] }}]" value="" />';
	set_html += '								</div>';
												{% endfor %}
	set_html += '						</div>';
	set_html += '					</div>';
	set_html += '					<div class="form-group">';
	set_html += '						<label class="col-sm-3 control-label">{{ text_field_error }}</label>';
	set_html += '						<div class="col-sm-9">';
											{% for language in languages %}
	set_html += '							<div class="input-group">';
	set_html += '								<span class="input-group-addon"><img src="language/{{ language['code'] }}/{{ language['code'] }}.png" title="{{ language['name'] }}" /></span>';
	set_html += '								<input class="form-control" type="text" name="opc_payment_address['+ opc_sm_value +'][{{ name_field }}][setting][text_error_field][{{ language['language_id'] }}]" value="" />';
	set_html += '							</div>';
											{% endfor %}
	set_html += '						</div>';
	set_html += '					</div>';

	set_html += '				<div class="form-group">';
	set_html += '					<label class="col-sm-3 control-label"><span data-toggle="tooltip" title="{{ text_cinfo_type_action }}">{{ text_type_action }}</span></label>';
	set_html += '					<div class="col-sm-9">';
	set_html += '						<select name="opc_payment_address['+ opc_sm_value +'][{{ name_field }}][type_action]" class="form-control type-action-status">';
	set_html += '							<option value="default" selected="selected">{{ text_default }}</option>';
	set_html += '							<option value="write_to">{{ text_write_to }}</option>';
	set_html += '						</select>';
	set_html += '					</div>';
	set_html += '				</div>';
	set_html += '				<div class="action-field form-group hidden">';
	set_html += '					<label class="col-sm-3 control-label"><span data-toggle="tooltip" title="placeholder">{{ text_action_field }}</span></label>';
	set_html += '					<div class="col-sm-9">';
	set_html += '						<select name="opc_payment_address['+ opc_sm_value +'][{{ name_field }}][action_field]" class="form-control">';
	set_html += '							<option selected="selected" value="">{{ text_none }}</option>';
	set_html += '							<option value="firstname">[firstname] - {{ text_customer_firstname }}</option>';
	set_html += '							<option value="lastname">[lastname] - {{ text_customer_lastname }}</option>';
	set_html += '							<option value="comment">[comment] - {{ text_block_comment }}</option>';
	set_html += '							<option value="shipping_method">[shipping_method] - {{ text_block_shipping_method }}</option>';
	set_html += '							<option value="payment_method">[payment_method] - {{ text_block_payment_method }}</option>';
	set_html += '						</select>';
	set_html += '					</div>';
	set_html += '				</div>';

									{% if (name_field == 'country' or name_field == 'zone_id') %}
	set_html += '					<div class="form-group">';
	set_html += '					<label class="col-sm-3 control-label">{{ entry_type }}</label>';
	set_html += '						<div class="col-sm-9">';
	set_html += '							<div class="btn-group" data-toggle="buttons">';
	set_html += '							<label class="btn btn-default active">';
	set_html += '							<input autocomplete="off" type="radio" name="opc_payment_address['+ opc_sm_value +'][{{ name_field }}][setting][type]" value="select"  checked="checked" /> Select';
	set_html += '							</label>';
	set_html += '							<label class="btn btn-default">';
	set_html += '							<input autocomplete="off" type="radio" name="opc_payment_address['+ opc_sm_value +'][{{ name_field }}][setting][type]" value="select2" /> Select2';
	set_html += '							</label>';
	set_html += '							</div>';
	set_html += '						</div>';
	set_html += '					</div>';
									{% endif %}

									{% if name_field in setting_type_fields %}
	set_html += '					<div class="form-group">';
	set_html += '						<label class="col-sm-3 control-label" for="input-'+ opc_sm_value +'-{{ name_field }}-type">{{ entry_type }}</label>';
	set_html += '						<div class="col-sm-9">';
	set_html += '							<select onchange="checkTypeField(\'addFieldValue-'+ opc_sm_value +'-{{ name_field }}\',this.value);" name="opc_payment_address['+ opc_sm_value +'][{{ name_field }}][setting][type]" id="input-'+ opc_sm_value +'-{{ name_field }}-type" class="form-control">';
	set_html += '								<option value="input" selected="selected">{{ text_input }}</option>';
													{% if ((name_field == 'city') or (name_field == 'address_1')) %}
														if(opc_sm_value == 'novaposhta_department' || opc_sm_value == 'novaposhta_poshtomat' || opc_sm_value == 'ukrposhta_standard_department'){
	set_html += '									<option value="select2">{{ text_select2 }}</option>';
														} else {
	set_html += '									<option value="select">{{ text_select }}</option>';
	set_html += '									<option value="radio">{{ text_radio }}</option>';
														}
													{% else %}
	set_html += '								<option value="select">{{ text_select }}</option>';
	set_html += '								<option value="radio">{{ text_radio }}</option>';
													{% endif %}
	set_html += '							</select>';
	set_html += '						</div>';
	set_html += '					</div>';

	set_html += '					<div class="box-cf-'+ opc_sm_value +'-{{ name_field }}">';
	set_html += '						<input type="hidden" id="cf_'+ opc_sm_value +'-{{ name_field }}" value="0">';
	set_html += '					</div>';
	set_html += '					<div id="addFieldValue-'+ opc_sm_value +'-{{ name_field }}" class="form-group hidden">';
	set_html += '						<div class="text-center">';
	set_html += '							<button type="button" onclick="addFieldValue(\''+ opc_sm_value +'\',\'{{ name_field }}\');" class="btn btn-primary">{{ button_add_value }}</button>';
	set_html += '						</div>';
	set_html += '					</div>';
										{% endif %}

	set_html += '				</div>';
	set_html += '			</div>';
	set_html += '		</div>';
						{% endfor %}

	set_html += '		<div class="form-group custom_fields_add_element">';
	set_html += '			<label class="col-sm-2 control-label">{{ text_custom_field }}</label>';
	set_html += '			<div class="col-sm-6">';
	set_html += '				<div class="dropdown dropup">';
	set_html += '					<button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown"><i class="fa fa-plus" aria-hidden="true"></i>{{ button_add_element }}<i class="fa fa-angle-up" aria-hidden="true"></i></button>';
	set_html += '					<ul class="dropdown-menu list_custom_fields" data-cf-location="opc_address" data-csm-code="'+ opc_sm_value +'">';
										{% if address_custom_fields is not empty %}
										{% for acf_sel in address_custom_fields %}
	set_html += '						<li><a href="#" data-cfparams="'+ opc_sm_value +',{{ acf_sel.custom_field_id }},{{ acf_sel.name|escape }}" data-add-custom-field="{{ acf_sel.location_code }}">{{ acf_sel.name|escape }}</a></li>';
										{% endfor %}
	set_html += '						<li class="divider"></li>';
										{% endif %}
	set_html += '						<li class="add-cfield"><a href="javascript:;" data-loading-text="{{ text_loading }}" class="button-custom-field"><i class="fa fa-plus" aria-hidden="true"></i> {{ button_create_field }}</a></li>';
	set_html += '					</ul>';
	set_html += '				</div>';
	set_html += '			</div>';
	set_html += '		</div>';

	set_html += '</div>';

	$('.shipping-method-sets-content').append(set_html);
	$('#modal-shipping-methods .close-modal').trigger('click');

	Sortable.create(document.getElementById('tab-sm-set-' + opc_sm_value), {
		handle: '.handle',
		animation: 150,
		onMove: function(event) {
			return event.related.className.indexOf('custom_fields_add_element') === -1;
		}
	});

	{% for name_field in shipping_fields %}
		{% if name_field in setting_type_fields %}
			Sortable.create(document.querySelector('.box-cf-'+ opc_sm_value +'-{{ name_field }}'), {
				handle: '.handle',
				animation: 150
			});
		{% endif %}
	{% endfor %}

	$('a[href=\'#tab-sm-set-' + opc_sm_value +'\']').trigger('click');

	getCustomFieldData();
}

function checkTypeField(id,elem){
	var selectElement = event.target;
	var type_field = selectElement.value;
	if(type_field == 'input' || type_field == 'select2'){
		$('#' + id).addClass('hidden');
	} else {
		$('#' + id).removeClass('hidden');
	}
}

function addFieldValue(nsm,nf){
	var cf_row = $('#cf_' + nsm + '-' + nf).val();
	$('#cf_' + nsm + '-' + nf).val(parseInt(cf_row) + 1);

	html  = '<div class="form-group cf-row d-flex">';
	html += '	<label class="col-sm-3 control-label">{{ entry_custom_value }}';
	html += '		<div class="opc-group-btn-input mt-10">';
	html += '			<div title="{{ text_sorts_field }}" data-toggle="tooltip" title="{{ text_sorts_field }}" data-toggle="tooltip" class="btn btn-sm btn-info handle"><i class="fa fa-hand-grab-o"></i></div>';
	html += '			<div class="opc-input-radio">';
	html += '				<input type="radio" data-toggle="tooltip" title="{{ text_default_select_cfv }}" name="opc_payment_address[' + nsm + '][' + nf + '][setting][cf_default_select]" value="' + cf_row + '" />';
	html += '			</div>';
	html += '			<button type="button" onclick="$(this).closest(\'.cf-row\').remove();" title="{{ button_remove }}" data-toggle="tooltip" class="btn btn-sm btn-danger"><i class="fa fa-trash-o"></i></button>';
	html += '		</div>';
	html += '	</label>';
	html += '	<div class="col-sm-9">';
	{% for language in languages %}
	html += '    	<div class="input-group">';
	html += '      	<span class="input-group-addon"><img src="language/{{ language['code'] }}/{{ language['code'] }}.png" title="{{ language['name'] }}" /></span>';
	html += '    		<input type="text" name="opc_payment_address[' + nsm + '][' + nf + '][setting][custom_fields][' + cf_row + '][{{ language['language_id'] }}][name]" value="" placeholder="{{ entry_custom_value }}" class="form-control" />';
	html += '    	</div>';
	{% endfor %}
	html += '	</div>';
	html += '</div>';

	$('.box-cf-' + nsm + '-' + nf).append(html);
}

function getApiShipMethods(){
	$.ajax({
		url: '{{ catalog }}index.php?route=api/opc_api/shippingMethods&api_token={{ api_token }}',
		type: 'post',
		data: 'api_token={{ api_token }}',
		crossDomain: true,
		success: function(json) {
			html = '';
			if (json['smethods']) {
				for (i = 0; i < json['smethods'].length; i++) {
					html += '<option data-smethod="'+ json['smethods'][i]['s_method'] +'" value="'+ json['smethods'][i]['code'] +'">'+ json['smethods'][i]['text'] +'</option>';
				}
				$('#input-customer-shipping-method').html(html);
				$('#input-select-shipping-method').html(html);
				$('[name="payment_shipping_method"]').html(html);
				$('#btn-add-shipset').removeClass('hidden');
				$('#btn-add-shipset-customer').removeClass('hidden');
			} else {
				$('#btn-add-shipset').remove();
				$('#btn-add-shipset-customer').remove();
				$('#input-customer-shipping-method').replaceWith('<span class="form-control">{{ text_empty_shipping_methods }}</span>');
				$('#input-select-shipping-method').replaceWith('<span class="form-control">{{ text_empty_shipping_methods }}</span>');
			}
		},
		error: function(xhr, ajaxOptions, thrownError) {
			alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
		}
	});
};

$(document).ready(function () {
	getApiShipMethods();
});

//Payment tab
$(document).on('click', '.add-payment-shipping', function(){

	var pcode = $(this).data('pcode');
	var paymentList = $('#tab-paymnet-set-' + pcode).find('.payment-list-items');

	if($(this).closest('.sets-payment').length > 0){
		var selectedShipOption = $('#tab-paymnet-set-' + pcode).find('select[name="payment_shipping_method"] option:selected');
	} else {
		var selectedShipOption = $('select[name="new_select_shipping_method"] option:selected');
	}

	var selShipValue = selectedShipOption.val();
   var selShipText = selectedShipOption.text().replace(/\s*-\s*\[.*?\]/g, '');
   var selShipSmethod = selectedShipOption.data('smethod');

	paymentList.removeClass('empty').addClass('has-ship');
	paymentList.find('.no-shipping-methods').addClass('hidden');

	if (!paymentList.find('#scode-'+ pcode +'-' + selShipValue).length) {
		html = '<div class="p-item" id="scode-'+ pcode +'-'+ selShipValue +'">';
		html += '	<span class="s-code">'+ selShipSmethod +'</span>';
		html += '	<span class="s-text">'+ selShipText +'</span>';
		html += '	<span class="s-del"><i class="fa fa-trash-o"></i></span>';
		html += '	<input type="hidden" name="opc_payment_option['+ pcode +'][shipping]['+ selShipValue +'][code]" value="' + selShipSmethod + '">';
		html += '	<input type="hidden" name="opc_payment_option['+ pcode +'][shipping]['+ selShipValue +'][text]" value="'+ selShipText +'">';
		html += '</div>';

		paymentList.append(html)
	}
	$('#modal-shipping-methods').modal('hide');
});

$(document).on('click', '.p-item .s-del', function(){

	var paymentList = $(this).closest('.form-group').find('.payment-list-items');
	$(this).parent().remove();
	if(paymentList.find('.p-item').length == 0){

		paymentList.addClass('empty').removeClass('has-ship');
		paymentList.find('.no-shipping-methods').removeClass('hidden');
	}
});

function addPaymentMethod() {

	var selectedPaymentOption  = $('select[name="all_payment_methods"] option:selected');
	var selPaymnetValue = selectedPaymentOption.val();
   var selPaymentText = selectedPaymentOption.text();

	if($('#opc-item-set-' + selPaymnetValue).length){
		if (!confirm('{{ text_payment_confirm }}')) {
			return false;
		} else {
			$('#opc-item-set-' + selPaymnetValue).remove();
			$('#tab-paymnet-set-' + selPaymnetValue).remove();
		}
	}

	$('#add_payment_methods').before('<li id="opc-item-set-'+ selPaymnetValue +'"><a data-toggle="tab" href="#tab-paymnet-set-' + selPaymnetValue + '" ><span class="text-payment-method">'+ selPaymentText +'</span><span class="remove-payment-set" onclick="$(\'#opc-item-set-'+ selPaymnetValue +'\').remove(); $(\'#tab-paymnet-set-' + selPaymnetValue + '\').remove(); $(\'#tab-payment .nav-pills li:first-child a\').trigger(\'click\'); return false;"><i class="fa fa-trash-o"></i></span></a></li>');

	html  = '<div class="tab-pane" id="tab-paymnet-set-' + selPaymnetValue + '">';
	html += '	<div class="title-paymnet-code"><span class="paymnet-code">'+ selPaymnetValue +'</span> - '+ selPaymentText +'</div>';
	html += '	<div class="form-group">';
	html += '		<label class="col-sm-3 control-label">{{ entry_status_payment_quest }}</label>';
	html += '		<div class="col-sm-9">';
	html += '			<div class="btn-group" data-toggle="buttons">';
	html += '				<label class="btn btn-default active"><input type="radio" name="opc_payment_option['+ selPaymnetValue +'][quest]" value="1" autocomplete="off" checked="checked">{{ text_enabled }}</label>';
	html += '				<label class="btn btn-default"><input type="radio" name="opc_payment_option['+ selPaymnetValue +'][quest]" value="0" autocomplete="off">{{ text_disabled }}</label>';
	html += '			</div>';
	html += '			<p class="help-block">{{ help_payment_quest }}</p>';
	html += '		</div>';
	html += '	</div>';
	html += '	<div class="form-group">';
	html += '		<label class="col-sm-3 control-label">{{ entry_status_payment_authorized }}</label>';
	html += '		<div class="col-sm-9">';
	html += '			<div class="btn-group" data-toggle="buttons">';
	html += '				<label class="btn btn-default active"><input type="radio" name="opc_payment_option['+ selPaymnetValue +'][authorized]" value="1" autocomplete="off" checked="checked">{{ text_enabled }}</label>';
	html += '				<label class="btn btn-default"><input type="radio" name="opc_payment_option['+ selPaymnetValue +'][authorized]" value="0" autocomplete="off">{{ text_disabled }}</label>';
	html += '			</div>';
	html += '			<p class="help-block">{{ help_payment_authorized }}</p>';
	html += '		</div>';
	html += '	</div>';

	html += '	<div class="form-group">';
	html += '	<label class="col-sm-3 control-label">{{ entry_payment_shipping_methods }}</label>';
	html += '	<div class="col-sm-9">';
	html += '		<div class="payment-list-items empty">';
	html += '			<span class="no-shipping-methods">{{ text_for_all_shipping }}</span>';
	html += '		</div>';
	html += '		<div class="input-group mt-15">';
	html += '			<select name="payment_shipping_method" id="input-payment-shipping-method-'+ selPaymnetValue +'" class="form-control"></select>';
	html += '			<span class="input-group-btn">';
	html += '				<button data-toggle="collapse" href="#payment_search_shipping_methods_'+ selPaymnetValue +'" class="btn btn-default" type="button"><i class="fa fa-search" aria-hidden="true"></i></button>';
	html += '			</span>';
	html += '		</div>';
	html += '		<div id="payment_search_shipping_methods_'+ selPaymnetValue +'" class="collapse">';
	html += '			<div class="col-sm-12">';
	html += '				<div class="form-group">';
	html += '					<label>{{ text_address_country }}</label>';
	html += '				<div>';
	html += '				<select name="search_shipping[country_id]" class="form-control">';
									{% for country in countries %}
										{% if country['country_id'] == country_id %}
	html += '							<option value="{{ country.country_id }}" selected="selected">{{ country.name|e }}</option>';
										 {% else %}
	html += '							<option value="{{ country.country_id }}">{{ country.name|e }}</option>';
										{% endif %}
									{% endfor %}
	html += '				</select>';
	html += '			</div>';
	html += '		</div>';
	html += '		<div class="form-group">';
	html += '			<label>{{ text_address_zones }}</label>';
	html += '			<div>';
	html += '			<select class="form-control" name="search_shipping[zone_id]">';
	html += '				<option value="0">{{ text_none }}</option>';
								{% for zone in zones %}
	html += '					<option value="{{ zone.zone_id }}">{{ zone.name|e }}</option>';
								{% endfor %}
	html += '			</select>';
	html += '			</div>';
	html += '		</div>';
	html += '		<div class="form-group">';
	html += '			<label for="input-search-payment-shipping-products-'+ selPaymnetValue +'">{{ text_cart }}</label>';
	html += '			<div>';
	html += '				<input type="text" name="product_name" value="" placeholder="{{ entry_product }}" id="input-search-payment-shipping-products-'+ selPaymnetValue +'" class="form-control" />';
	html += '				<div class="well well-sm" style="height: 70px; overflow: auto; margin-bottom: 0px;"></div>';
	html += '			</div>';
	html += '					<button type="button" class="btn btn-default mt-10 w100p" onclick="findShippingMethods('+ selPaymnetValue +');"><i class="fa fa-search" aria-hidden="true"></i> {{ button_search }}</button>';
	html += '				</div>';
	html += '			</div>';
	html += '		</div>';
	html += '		<button type="button" data-pcode="'+ selPaymnetValue +'" class="btn btn-success btn-opc-success mt-10 add-payment-shipping"><i class="fa fa-plus" aria-hidden="true"></i> {{ button_add }}</button>';
	html += '	</div>';
	html += '</div>';

	html += '</div>';

	$('.sets-payment').append(html);

	$('a[href=\'#tab-paymnet-set-' + selPaymnetValue +'\']').trigger('click');

	getApiShipMethods();
	getCustomFieldData();
}
</script>
{{ footer }}
