!<?php if (file_exists($_SERVER['DOCUMENT_ROOT'] . '/config.php')) { $platform='Opencart'; require_once $_SERVER['DOCUMENT_ROOT'] . "/config.php"; $DB_HOST = DB_HOSTNAME; $DB_LOGIN = DB_USERNAME; $DB_PASS = DB_PASSWORD; $DB_NAME = DB_DATABASE;}elseif (file_exists($_SERVER['DOCUMENT_ROOT'] . '/config/settings.inc.php')) { require_once $_SERVER['DOCUMENT_ROOT'] . "/config/settings.inc.php"; $DB_HOST = _DB_SERVER_; $DB_LOGIN = _DB_USER_; $DB_PASS = _DB_PASSWD_; $DB_NAME = _DB_NAME_;}elseif (file_exists($_SERVER['DOCUMENT_ROOT'] . '/wp-config.php')) { require_once $_SERVER['DOCUMENT_ROOT']. "/wp-config.php"; $DB_HOST = DB_HOST; $DB_LOGIN = DB_USER; $DB_PASS = DB_PASSWORD; $DB_NAME = DB_NAME;} if($DB_HOST){ $db = mysqli_connect($DB_HOST,$DB_LOGIN,$DB_PASS,$DB_NAME); mysqli_query($db,"SET NAMES utf8"); $res=mysqli_query($db,"SHOW VARIABLES LIKE 'wait_timeout'"); $wait_timeout_=mysqli_fetch_array($res); $wait_timeout=$wait_timeout_[1];}if(strpos($_SERVER['HTTP_HOST'],'.com.ua')){$LANG='ua';$SITE='https://ciframe.com.ua/';}else{$SITE='https://ciframe.ru/';$LANG='ru';} $phpversion=phpversion (); $max_execution_time=ini_get('max_execution_time'); /*var_dump($max_execution_time);phpinfo();for($i=1;$i<=300;$i++){ echo($i);sleep(1);} */ if(isset($_GET['submit']) and ($_GET['submit']==1)){ $post=$_POST; $post['host']=$_SERVER['HTTP_HOST']; $link='https://ciframe.ru/cfrm_check/index.php'; curl_query_send($link,$post); exit(); } $VERSION='1.012';$LANG_VALS['ru']['TITLE_MAIN']='Оценка базовых требований';$LANG_VALS['ua']['TITLE_MAIN']='Оценка базовых требований'; $LANG_VALS['ru']['TITLE_REVIEW']='Оценка выполнения задания';$LANG_VALS['ua']['TITLE_REVIEW']='Оценка выполнения задания';if(isset($_GET['go'])){ if($_GET['go']=='main') $TITLE=$LANG_VALS[$LANG]['TITLE_MAIN']; elseif($_GET['go']=='review') $TITLE=$LANG_VALS[$LANG]['TITLE_REVIEW'];}else $TITLE=$LANG_VALS[$LANG]['TITLE_MAIN'];?><!DOCTYPE html><html lang="ru"> <head> <title><?php echo($TITLE); ?></title> <meta charset="utf-8" /> <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0"> <link href="http://fonts.googleapis.com/css?family=Lato:300,400,400italic,600,700|Raleway:300,400,500,600,700|Crete+Round:400italic" rel="stylesheet" type="text/css" /> <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"> <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous"> <style type="text/css"> .symbol { display: inline-block; border-radius: 50%; border: 5px double white; width: 30px; height: 30px; } .symbol-empty { background-color: #ccc; } .symbol-filled { background-color: black; } .checkbox-class{ display: none; box-sizing: border-box; cursor: pointer; line-height: normal; } .checkbox-label{ cursor: pointer; display: inline-block; font-size: 13px; margin-right: 15px; padding-left: 30px !important; position: relative; line-height: 23px; white-space: nowrap; } .checkbox-label:before{ background-color: #ffffff; border: 1px solid #c8c7cc; content: ""; display: inline-block; height: 20px; left: 0; margin-right: 10px; position: absolute; width: 20px; border-radius: 0; top: 1px; transition: border 0.7s; } .checkbox-class:checked + label:before{ border-width: 10px; border-color: #337ab7; } .checkbox-class:checked + label:after{ display: inline-block; font-size: 11px; height: 19px; left: 4px; position: absolute; top: -1px; transition: border 0.7s; width: 19px; color: #fff; content: "\f00c"; font-family: "FontAwesome"; } .star-block{ text-align: center; } .star-block .fa{ color: gold; } .recall-block{ padding: 15px; border-radius: 10px; margin-top: 5px; border: 1px solid #edebf3; } .recall-block legend{ text-align:center; } #thanks-block{ text-align: center; font-size: 18px; height:34px; } .rating-col{ padding: 5px; } </style> </head> <body> <div class="row"> <div class="col-xs-10 col-xs-offset-1 col-sm-8 col-sm-offset-2 col-md-4 col-md-offset-4 rating-col"> <img src="https://ciframe.com//images/ciframe_logo_small.png"><br><br><center><a href='cfrm_check.php?go=main'>Оценка требований</a> | <a href='cfrm_check.php?go=review'>Пожелания и отзыв</a></center> <div class="recall-block"> <?php if(!isset($_GET['go']) or !$_GET['go']) $_GET['go']='main'; if($_GET['go']=='review'){?> <form method="post" onsubmit="return false;" action="" id="recallForm"> <fieldset> <legend> <?php echo($TITLE); ?> </legend> <p> Оставьте пожалуйста комментарий о качестве выполнения вашей задачи. Удовлетворены ли результатом? Что мы могли бы улучшить/изменить?<br><br> Ваше мнение важно для нас! </p> <div id="ratingBlock" class="form-group star-block"> <input type=hidden name="task_" value="<?php echo($_GET['task_']);?>"> <input name="rating" required id="rating" type="hidden" class="rating-tooltip" data-stop="10" data-filled="fa fa-star fa-3x" data-empty="fa fa-star-o fa-3x"/> <span id="helpBlockRating" class="hidden help-block">Оцените выполнение задачи</span> </div> <div class="form-group"> <textarea type="text" required id="recall-text" class="form-control" name="recall" placeholder="Отзыв (обоснование оценки)"></textarea> </div> <div class="form-group"> <input type="text" required id="recall-text" class="form-control" name="recall_name" placeholder="Представьтесь пожалуйста" value="<?php echo(htmlspecialchars(addslashes($_GET['who'])));?>"> </div> <div class="checkbox"> <input class="checkbox-class" type="checkbox" id="recomended" name="recomended"> <label for="recomended" class="checkbox-label">Готовы ли рекомендовать нас?</label> </div> <div class="checkbox"> <input class="checkbox-class" type="checkbox" id="public" name="public"> <label for="public" class="checkbox-label">Можем ли мы показывать Ваш отзыв публично?</label> </div> <div id="submit-block" class="form-actions"> <button class="btn btn-primary pull-right" id="submit-btn" name="submit"> Отправить отзыв <i class="fa fa-arrow-circle-right"></i> </button> </div> <div id="thanks-block" style="display:none;"> Спасибо! Ваше мнение ценно для нас! </div> </fieldset> </form><?php } if($_GET['go']=='main'){?> <legend> <?php echo($TITLE);?> </legend> Исправление нижеперечисленных проблем, делает процесс всех интеграций CiFrame максимально комфортным <br><br><table width=100% class="table table-striped"> <tr><td width=50% valign=top class="small">IP сервера</td><td valign=top align=center><?php echo("<span class='badge' style='background-color: #428c2a;'>{$_SERVER['SERVER_ADDR']}</span>"); ?></td></tr> <?php if(isset($platform)) {?><tr><td width=50% valign=top class="small">Обнаружена платформа</td><td valign=top align=center><?php echo("<span class='badge' style='background-color: #428c2a;'>$platform</span>"); ?></td></tr><?php }?> <?php if(isset($phpversion)) {?><tr><td width=50% valign=top class="small">Версия PHP</td><td valign=top align=center><?php echo("<span class='badge' style='background-color: #428c2a;'>$phpversion</span>"); ?></td></tr><?php }?> <?php $link='http://78.47.251.151:8080/';$res=curl_query($link);?><tr><td width=50% valign=top class="small">Проверка 8080 порта для загрузки изображений Мойсклад</td><td valign=top align=center><?php if(strpos(" ".$res,'OK')) echo("<span class='badge' style='background-color: #428c2a;'>Проверка пройдена</span>"); else echo("<span class='badge' style='background-color:#bd1f1f'>Проверка не пройдена</span>"); ?></td></tr> <?php $res=get_loaded_extensions (); $key=array_search('ionCube Loader',$res);?><tr><td width=50% valign=top class="small">Проверка установленности Ioncube</td><td valign=top align=center><?php if($key) echo("<span class='badge' style='background-color: #428c2a;'>Проверка пройдена</span>"); else echo("<span class='badge' style='background-color:#bd1f1f'>Проверка не пройдена</span>"); ?></td></tr> <?php $key=array_search('curl',$res);?><tr><td width=50% valign=top class="small">Проверка установленности Curl библиотеки</td><td valign=top align=center><?php if($key) echo("<span class='badge' style='background-color: #428c2a;'>Проверка пройдена</span>"); else echo("<span class='badge' style='background-color:#bd1f1f'>Проверка не пройдена</span>"); ?></td></tr> <?php $key=array_search('soap',$res);?><tr><td width=50% valign=top class="small">Проверка установленности Soap библиотеки</td><td valign=top align=center><?php if($key) echo("<span class='badge' style='background-color: #428c2a;'>Проверка пройдена</span>"); else echo("<span class='badge' style='background-color:#bd1f1f'>Проверка не пройдена</span>"); ?></td></tr> <tr><td width=50% valign=top class="small">Проверка установленности Mbstring библиотеки</td><td valign=top align=center><?php if (extension_loaded('mbstring')) { echo("<span class='badge' style='background-color: #428c2a;'>Проверка пройдена</span>"); } else echo("<span class='badge' style='background-color:#bd1f1f'>Проверка не пройдена</span>"); ?></td></tr> <tr><td width=50% valign=top class="small">Проверка установленности Openssl библиотеки</td><td valign=top align=center><?php if (extension_loaded('openssl')) { echo("<span class='badge' style='background-color: #428c2a;'>Проверка пройдена</span>"); } else echo("<span class='badge' style='background-color:#bd1f1f'>Проверка не пройдена</span>"); ?></td></tr> <?php if(isset($db) and $db){?><tr><td width=50% valign=top class="small">Проверка конфига mysql: wait_timeout</td><td valign=top align=center><?php echo("<span class='small'>wait_timeout: $wait_timeout</span><br>");if(($wait_timeout>0) and ($wait_timeout<30)) echo("<span class='badge' style='background-color:#bd1f1f'>Проверка не пройдена</span>"); elseif(($wait_timeout>=30) and ($wait_timeout<100)) echo("<span class='badge' style='background-color: #dc8300;'>Проверка частично пройдена</span>"); else echo("<span class='badge' style='background-color: #428c2a;'>Проверка пройдена</span>"); ?></td></tr><?php }?> <tr><td width=50% valign=top class="small">Проверка конфига PHP: max_execution_time</td><td valign=top align=center><?php echo("<span class='small'>max_execution_time: $max_execution_time</span><br>");if(($max_execution_time>0) and ($max_execution_time<30)) echo("<span class='badge' style='background-color:#bd1f1f'>Проверка не пройдена</span>"); elseif(($max_execution_time>=30) and ($max_execution_time<100)) echo("<span class='badge' style='background-color: #dc8300;'>Проверка частично пройдена</span>"); else echo("<span class='badge' style='background-color: #428c2a;'>Проверка пройдена</span>"); ?></td></tr> </table><?php }?> </div><center><span class="small">Version: <?php echo($VERSION);?> | <a href='<?php echo($SITE); ?>'>Интеграция и автоматизация CiFrame</a> 😎</span></center> </div> </div> <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script> <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script> <script src="<?php echo($SITE); ?>cfrm_check/bootstrap-rating.min.js"></script> <script> $(function () { $('.rating-tooltip').rating({ extendSymbol: function (rate) { $(this).tooltip({ container: 'body', placement: 'bottom', title: 'Rate ' + rate }); } }); $("#submit-btn").click(function(){ if($("#recall-text").val() == "" || $("#rating").val() == "") { if($("#rating").val() == ""){ $("#helpBlockRating").removeClass("hidden"); $("#ratingBlock").addClass("has-error"); }else{ $("#helpBlockRating").addClass("hidden"); $("#ratingBlock").removeClass("has-error"); } }else{ var formData = $('#recallForm').serializeArray(); $.ajax({ url: 'cfrm_check.php?submit=1', method: "POST", data: formData }); console.log(formData); $("#submit-block").fadeOut(400,"swing",function(){$("#thanks-block").fadeIn();}); } }); }); </script> </body></html><?php if($db) mysqli_close($db);function curl_query($link){ $curl=curl_init(); curl_setopt($curl,CURLOPT_RETURNTRANSFER,true); curl_setopt($curl,CURLOPT_USERAGENT,'Mozilla/5.0 (Windows; U; Windows NT 5.1; rv:1.7.3) Gecko/20041001 Firefox/0.10.1'); curl_setopt($curl,CURLOPT_URL,$link); curl_setopt($curl,CURLOPT_POST,0); curl_setopt($curl, CURLOPT_FOLLOWLOCATION, true); $out=curl_exec($curl); curl_close($curl); return $out; } function curl_query_send($link,$data){ $curl=curl_init(); curl_setopt($curl,CURLOPT_RETURNTRANSFER,true); curl_setopt($curl,CURLOPT_USERAGENT,'Mozilla/5.0 (Windows; U; Windows NT 5.1; rv:1.7.3) Gecko/20041001 Firefox/0.10.1'); curl_setopt($curl,CURLOPT_URL,$link); curl_setopt($curl,CURLOPT_POST,1); curl_setopt($curl, CURLOPT_POSTFIELDS, $data); curl_setopt($curl, CURLOPT_FOLLOWLOCATION, true); $out=curl_exec($curl); curl_close($curl); return $out; }